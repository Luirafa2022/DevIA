O que h√° de novo no Python 3.8
******************************

Editor:
   Raymond Hettinger

Este artigo explica os novos recursos no Python 3.8, em compara√ß√£o com
3.7. Python 3.8 foi lan√ßado em 14 de outubro de 2019. Veja changelog
para uma lista completa de mudan√ßas.


Resumo -- Destaques da vers√£o
=============================


Novas funcionalidades
=====================


Express√µes de atribui√ß√£o
------------------------

Existe uma nova sintaxe ":=" que atribui valores a vari√°veis como
parte de uma express√£o maior. √â carinhosamente conhecido como "o
operador morsa" ("the walrus operator", em ingl√™s) devido √† sua
semelhan√ßa com os olhos e presas de uma morsa.

Neste exemplo, a express√£o de atribui√ß√£o ajuda a evitar a chamada de
"len()" duas vezes:

   if (n := len(a)) > 10:
       print(f"List is too long ({n} elements, expected <= 10)")

Um benef√≠cio semelhante surge durante a correspond√™ncia de express√µes
regulares, onde os objetos de correspond√™ncia s√£o necess√°rios duas
vezes, uma vez para testar se ocorreu uma correspond√™ncia e outra para
extrair um subgrupo:

   discount = 0.0
   if (mo := re.search(r'(\d+)% discount', advertisement)):
       discount = float(mo.group(1)) / 100.0

O operador tamb√©m √© √∫til com loops while que calculam um valor para
testar a finaliza√ß√£o do loop e, em seguida, precisam desse mesmo valor
novamente no corpo do loop:

   # Loop over fixed length blocks
   while (block := f.read(256)) != '':
       process(block)

Outro caso de uso motivador surge em compreens√µes de lista em que um
valor calculado em uma condi√ß√£o de filtragem tamb√©m √© necess√°rio no
corpo da express√£o:

   [clean_name.title() for name in names
    if (clean_name := normalize('NFC', name)) in allowed_names]

Tente limitar o uso do operador da morsa para limpar os casos que
reduzem a complexidade e melhoram a legibilidade.

Consulte **PEP 572** para uma descri√ß√£o completa.

(Contribu√≠do por Emily Morehouse em bpo-35224.)


Par√¢metros apenas posicionais
-----------------------------

Existe uma nova sintaxe de par√¢metro de fun√ß√£o "/" para indicar que
alguns par√¢metros de fun√ß√£o devem ser especificados posicionalmente e
n√£o podem ser usados como argumentos nomeados. Esta √© a mesma nota√ß√£o
mostrada por "help()" para fun√ß√µes C anotadas com a ferramenta
Argument Clinic de Larry Hastings.

No exemplo a seguir, os par√¢metros *a* e *b* s√£o apenas posicionais,
enquanto *c* ou *d* podem ser posicionais ou nomeados e *e* ou *f* s√£o
obrigatoriamente nomeados:

   def f(a, b, /, c, d, *, e, f):
       print(a, b, c, d, e, f)

A seguir, uma chamada v√°lida:

   f(10, 20, 30, d=40, e=50, f=60)

Por√©m, essas chamadas s√£o inv√°lidas:

   f(10, b=20, c=30, d=40, e=50, f=60)   # b cannot be a keyword argument
   f(10, 20, 30, 40, 50, f=60)           # e must be a keyword argument

Um caso de uso para essa nota√ß√£o √© que ele permite que fun√ß√µes puras
do Python emulem completamente os comportamentos das fun√ß√µes
codificadas em C existentes. Por exemplo, a fun√ß√£o embutida "divmod()"
n√£o aceita argumentos nomeados:

   def divmod(a, b, /):
       "Emulate the built in divmod() function"
       return (a // b, a % b)

Outro caso de uso √© impedir argumentos nomeados quando o nome do
par√¢metro n√£o for √∫til. Por exemplo, a fun√ß√£o embutida "len()" possui
a assinatura "len(obj, /)". Isso exclui chamadas estranhas, como:

   len(obj='hello')  # The "obj" keyword argument impairs readability

Um benef√≠cio adicional de marcar um par√¢metro como somente posicional
√© que ele permite que o nome do par√¢metro seja alterado no futuro sem
risco de quebrar o c√≥digo do cliente. Por exemplo, no m√≥dulo
"statistics", o nome do par√¢metro *dist* pode ser alterado no futuro.
Isso foi poss√≠vel com a seguinte especifica√ß√£o de fun√ß√£o:

   def quantiles(dist, /, *, n=4, method='exclusive')
       ...

Como os par√¢metros √† esquerda de "/" n√£o s√£o expostos como poss√≠veis
palavras-chave, os nomes dos par√¢metros permanecem dispon√≠veis para
uso em "**kwargs":

   >>> def f(a, b, /, **kwargs):
   ...     print(a, b, kwargs)
   ...
   >>> f(10, 20, a=1, b=2, c=3)         # a and b are used in two ways
   10 20 {'a': 1, 'b': 2, 'c': 3}

Isso simplifica bastante a implementa√ß√£o de fun√ß√µes e m√©todos que
precisam aceitar argumentos nomeados arbitr√°rios. Por exemplo, aqui
est√° um trecho do c√≥digo no m√≥dulo "collections":

   class Counter(dict):

       def __init__(self, iterable=None, /, **kwds):
           # Note "iterable" is a possible keyword argument

Consulte a **PEP 570** para uma descri√ß√£o completa.

(Contribui√ß√£o de Pablo Galindo em bpo-36540.)


Cache do sistema de arquivos paralelo para arquivos de bytecode compilados
--------------------------------------------------------------------------

A nova configura√ß√£o "PYTHONPYCACHEPREFIX" (tamb√©m dispon√≠vel como "-X"
"pycache_prefix") configura o cache impl√≠cito de bytecode para usar
uma √°rvore paralela separada do sistema de arquivos, em vez dos
subdiret√≥rios padr√£o "__pycache__" dentro cada diret√≥rio fonte.

O local do cache √© relatado em "sys.pycache_prefix" ("None" indica o
local padr√£o nos subdiret√≥rios "__pycache__").

(Contribui√ß√£o de Carl Meyer em bpo-33499.)


A compila√ß√£o de depura√ß√£o usa a mesma ABI da compila√ß√£o de lan√ßamento
---------------------------------------------------------------------

Agora, o Python usa a mesma ABI, seja ele compilado no modo de
lan√ßamento ou depura√ß√£o. No Unix, quando o Python √© compilado no modo
de depura√ß√£o, agora √© poss√≠vel carregar extens√µes C compiladas no modo
de lan√ßamento e extens√µes C compiladas usando a ABI est√°vel.

Compila√ß√µes de lan√ßamento e compila√ß√µes de depura√ß√£o agora s√£o
compat√≠veis com ABI: definir a macro "Py_DEBUG" n√£o implica mais a
macro "Py_TRACE_REFS", que introduz a √∫nica incompatibilidade ABI. A
macro "Py_TRACE_REFS", que adiciona a fun√ß√£o "sys.getobjects()" e a
vari√°vel de ambiente "PYTHONDUMPREFS", pode ser configurada usando a
nova op√ß√£o de compila√ß√£o "./configure --with-trace-refs".
(Contribui√ß√£o de Victor Stinner em bpo-36465.)

No Unix, as extens√µes C n√£o est√£o mais vinculadas ao libpython, exceto
no Android e Cygwin. Agora √© poss√≠vel que um Python vinculado
estaticamente carregue uma extens√£o C criada usando uma biblioteca
compartilhada Python. (Contribui√ß√£o de Victor Stinner em bpo-21536.)

No Unix, quando o Python √© compilado no modo de depura√ß√£o, a
importa√ß√£o agora tamb√©m procura extens√µes C compiladas no modo de
lan√ßamento e extens√µes C compiladas com a ABI est√°vel. (Contribui√ß√£o
de Victor Stinner em bpo-36722.)

Para incorporar o Python em uma aplica√ß√£o, uma nova op√ß√£o "--embed"
deve ser passada para "python3-config --libs --embed" para obter o
"-lpython3.8" (vincula a aplica√ß√£o ao libpython). Para dar suporte a
3.8 e vers√µes mais antigas, tente "python3-config --libs --embed"
primeiro e use como fallback para "python3-config --libs" (sem "--
embed") se o comando anterior falhar.

Adicione um m√≥dulo pkg-config "python-3.8-embed" para incorporar o
Python em uma aplica√ß√£o: "pkg-config python-3.8-embed --libs" inclui
"-lpython3.8". Para suportar tanto o 3.8 quanto o anterior, tente
"pkg-config python-X.Y-embed --libs" primeiro e use como fallback
"pkg-config python-X.Y --libs" (sem "--embed") se o comando anterior
falhar (substitua "X.Y" pela vers√£o do Python).

Por outro lado, "pkg-config python3.8 --libs" n√£o cont√©m mais
"-lpython3.8". As extens√µes C n√£o devem estar vinculadas ao libpython
(exceto no Android e Cygwin, cujos casos s√£o tratados pelo script);
essa altera√ß√£o √© retroativamente incompat√≠vel de prop√≥sito.
(Contribui√ß√£o de Victor Stinner em bpo-36721.)


O suporte a f-strings "=" para express√µes de auto-documenta√ß√£o e depura√ß√£o
--------------------------------------------------------------------------

Adicionado um especificador "=" para *f-string*s. Uma f-string como
"f'{expr=}'" ser√° expandida para o texto da express√£o, um sinal de
igual e, em seguida, a representa√ß√£o da express√£o avaliada. Por
exemplo:

>>> user = 'eric_idle'
>>> member_since = date(1975, 7, 31)
>>> f'{user=} {member_since=}'
"user='eric_idle' member_since=datetime.date(1975, 7, 31)"

O habitual f-string especificadores de formato permite mais controle
sobre como o resultado da express√£o √© exibido:

   >>> delta = date.today() - member_since
   >>> f'{user=!s}  {delta.days=:,d}'
   'user=eric_idle  delta.days=16,075'

O especificador "=" exibir√° toda a express√£o para que os c√°lculos
possam ser mostrados:

   >>> print(f'{theta=}  {cos(radians(theta))=:.3f}')
   theta=30  cos(radians(theta))=0.866

(Contribui√ß√£o de Eric V. Smith e Larry Hastings em bpo-36817.)


PEP 578: Ganchos de auditoria em tempo de execu√ß√£o Python
---------------------------------------------------------

O PEP adiciona um Gancho de Auditoria e um Gancho Aberto Verificado.
Ambos est√£o dispon√≠veis no Python e no c√≥digo nativo, permitindo que
aplica√ß√µes e estruturas escritas em c√≥digo Python puro aproveitem as
notifica√ß√µes extras, al√©m de permitir que incorporadores ou
administradores de sistema implementem vers√µes do Python onde a
auditoria est√° sempre ativada.

Veja **PEP 578** para mais detalhes.


PEP 587: Configura√ß√£o de Inicializa√ß√£o do Python
------------------------------------------------

O **PEP 587** adiciona uma nova API C para configurar a Inicializa√ß√£o
do Python, fornecendo um controle mais preciso de toda a configura√ß√£o
e melhores relat√≥rios de erros.

Novas estruturas:

* "PyConfig"

* "PyPreConfig"

* "PyStatus"

* "PyWideStringList"

Novas Fun√ß√µes:

* "PyConfig_Clear()"

* "PyConfig_InitIsolatedConfig()"

* "PyConfig_InitPythonConfig()"

* "PyConfig_Read()"

* "PyConfig_SetArgv()"

* "PyConfig_SetBytesArgv()"

* "PyConfig_SetBytesString()"

* "PyConfig_SetString()"

* "PyPreConfig_InitIsolatedConfig()"

* "PyPreConfig_InitPythonConfig()"

* "PyStatus_Error()"

* "PyStatus_Exception()"

* "PyStatus_Exit()"

* "PyStatus_IsError()"

* "PyStatus_IsExit()"

* "PyStatus_NoMemory()"

* "PyStatus_Ok()"

* "PyWideStringList_Append()"

* "PyWideStringList_Insert()"

* "Py_BytesMain()"

* "Py_ExitStatusException()"

* "Py_InitializeFromConfig()"

* "Py_PreInitialize()"

* "Py_PreInitializeFromArgs()"

* "Py_PreInitializeFromBytesArgs()"

* "Py_RunMain()"

Esse PEP tamb√©m adiciona os campos "_PyRuntimeState.preconfig" (tipo
"PyPreConfig") e "PyInterpreterState.config" (tipo "PyConfig") campos
a essas estruturas internas. "PyInterpreterState.config" se torna a
nova configura√ß√£o de refer√™ncia, substituindo vari√°veis de
configura√ß√£o global e outras vari√°veis privadas.

Veja Configura√ß√£o de Inicializa√ß√£o do Python para a documenta√ß√£o.

Consulte a **PEP 587** para uma descri√ß√£o completa.

(Contribui√ß√£o de Victor Stinner em bpo-36763.)


PEP 590: Vectorcall: um protocolo de chamada r√°pida para CPython
----------------------------------------------------------------

O protocolo vectorcall √© adicionado √† API Python/C. Ele visa
formalizar as otimiza√ß√µes existentes que j√° foram feitas para v√°rias
classes. Qualquer tipo est√°tico que implemente um cham√°vel pode usar
esse protocolo.

Atualmente, isso √© provis√≥rio. O objetivo √© torn√°-lo totalmente
p√∫blico no Python 3.9.

Consulte a **PEP 590** para uma descri√ß√£o completa.

(Contribui√ß√£o de Jeroen Demeyer, Mark Shannon e Petr Viktorin em
bpo-36974.)


Protocolo de Pickle 5 com buffers de dados fora da banda
--------------------------------------------------------

Quando "pickle" √© usado para transferir grande quantidade de dados
entre processos Python, a fim de tirar proveito do processamento com
v√°rios n√∫cleos ou com v√°rias m√°quinas, √© importante otimizar a
transfer√™ncia reduzindo c√≥pias de mem√≥ria e, possivelmente, aplicando
t√©cnicas personalizadas, como como compacta√ß√£o dependente de dados.

O protocolo "pickle" 5 introduz suporte para buffers fora de banda,
onde dados compat√≠veis com a **PEP 3118** podem ser transmitidos
separadamente do fluxo de pickle principal, a crit√©rio da camada de
comunica√ß√£o.

Consulte a **PEP 574** para uma descri√ß√£o completa.

(Contribui√ß√£o de Antoine Pitrou em bpo-36785.)


Outras mudan√ßas na linguagem
============================

* A instru√ß√£o "continue" era ilegal na cl√°usula "finally" devido a um
  problema com a implementa√ß√£o. No Python 3.8, essa restri√ß√£o foi
  levantada. (Contribui√ß√£o de Serhiy Storchaka em bpo-32489.)

* Os tipos "bool", "int" e "fractions.Fraction" agora t√™m o m√©todo
  "as_integer_ratio()" como o encontrado em "float" e
  "decimal.Decimal". Esta pequena extens√£o da API torna poss√≠vel
  escrever "numerator, denominator = x.as_integer_ratio()" e fazer com
  que funcione em v√°rios tipos num√©ricos. (Contribui√ß√£o de Lisa Roach
  em bpo-33073 e Raymond Hettinger em bpo-37819.)

* Os construtores de "int", "float" e "complex" agora usar√£o o m√©todo
  especial "__index__()", se dispon√≠vel, e o m√©todo correspondente
  "__int__()", "__float__()" ou "__complex__()" n√£o est√° dispon√≠vel.
  (Contribui√ß√£o de Serhiy Storchaka em bpo-20092.)

* Adicionado suporte a escapes "\N{*name*}" em "express√µes regulares":

     >>> notice = 'Copyright ¬© 2019'
     >>> copyright_year_pattern = re.compile(r'\N{copyright sign}\s*(\d{4})')
     >>> int(copyright_year_pattern.search(notice).group(1))
     2019

  (Contribui√ß√£o de Jonathan Eunice e Serhiy Storchaka em bpo-30688.)

* Dict e dictviews agora s√£o iter√°veis em ordem de inser√ß√£o reversa
  usando "reversed()". (Contribui√ß√£o de R√©mi Lapeyre em bpo-33462.)

* A sintaxe permitida para nomes de palavras-chave em chamadas de
  fun√ß√£o foi ainda mais restrita. Em particular, "f((keyword)=arg)"
  n√£o √© mais permitido. Ele nunca teve a inten√ß√£o de permitir mais do
  que um nome simples no lado esquerdo de um termo de atribui√ß√£o de
  argumento nomeado. (Contribui√ß√£o de Benjamin Peterson em bpo-34641.)

* A descompacta√ß√£o iter√°vel generalizada das instru√ß√µes "yield" e
  "return" n√£o requer mais par√™nteses. Isso traz a sintaxe *yield* e
  *return* uma melhor concord√¢ncia com a sintaxe de atribui√ß√£o normal:

     >>> def parse(family):
             lastname, *members = family.split()
             return lastname.upper(), *members

     >>> parse('simpsons homer marge bart lisa maggie')
     ('SIMPSONS', 'homer', 'marge', 'bart', 'lisa', 'maggie')

  (Contribui√ß√£o de David Cuthbert e Jordan Chapman em bpo-32117.)

* Quando uma v√≠rgula est√° faltando em c√≥digo como "[(10, 20) (30,
  40)]", o compilador exibe um "SyntaxWarning" com uma sugest√£o √∫til.
  Isso melhora apenas tendo um "TypeError" indicando que a primeira
  tupla n√£o era cham√°vel. (Contribui√ß√£o de Serhiy Storchaka em
  bpo-15248.)

* As opera√ß√µes aritm√©ticas entre as subclasses de "datetime.date" ou
  "datetime.datetime" e "datetime.timedelta" agora retornam uma
  inst√¢ncia da subclasse, em vez da classe base. Isso tamb√©m afeta o
  tipo de retorno de opera√ß√µes cuja implementa√ß√£o (direta ou
  indiretamente) utiliza aritm√©tica de "datetime.timedelta", como
  "astimezone()". (Contribui√ß√£o de Paul Ganssle em bpo-32417.)

* Quando o interpretador Python √© interrompido por Ctrl-C (SIGINT) e a
  exce√ß√£o resultante "KeyboardInterrupt" n√£o √© capturada, o processo
  Python agora sai por meio de um sinal SIGINT ou com o c√≥digo de
  sa√≠da correto, para que o processo de chamada possa detectar que foi
  encerrado devido a um Ctrl-C. Os shells no POSIX e Windows usam isso
  para finalizar corretamente os scripts em sess√µes interativas.
  (Contribui√ß√£o do Google via Gregory P. Smith em bpo-1054041.)

* Alguns estilos avan√ßados de programa√ß√£o requerem a atualiza√ß√£o do
  objeto "types.CodeType" para uma fun√ß√£o existente. Como os objetos
  c√≥digo s√£o imut√°veis, um novo objeto c√≥digo precisa ser criado,
  modelado no objeto c√≥digo existente. Com 19 par√¢metros, isso foi um
  pouco tedioso. Agora, o novo m√©todo "replace()" torna poss√≠vel criar
  um clone com alguns par√¢metros alterados.

  Aqui est√° um exemplo que altera a fun√ß√£o "Statistics.mean()" para
  impedir que o par√¢metro *data* seja usado como argumento nomeado:

     >>> from statistics import mean
     >>> mean(data=[10, 20, 90])
     40
     >>> mean.__code__ = mean.__code__.replace(co_posonlyargcount=1)
     >>> mean(data=[10, 20, 90])
     Traceback (most recent call last):
       ...
     TypeError: mean() got some positional-only arguments passed as keyword arguments: 'data'

  (Contribui√ß√£o de Victor Stinner em bpo-37032.)

* Para n√∫meros inteiros, a forma de tr√™s argumentos da fun√ß√£o "pow()"
  agora permite que o expoente seja negativo no caso em que a base √©
  relativamente prim√°ria ao m√≥dulo. Em seguida, calcula um inverso
  modular para a base quando o expoente √© "-1" e uma pot√™ncia adequada
  desse inverso para outros expoentes negativos. Por exemplo, para
  calcular o inverso multiplicativo modular de 38 m√≥dulo 137, escreva:

     >>> pow(38, -1, 137)
     119
     >>> 119 * 38 % 137
     1

  Inversos modulares surgem na solu√ß√£o de equa√ß√µes diofantinas
  lineares. Por exemplo, para encontrar solu√ß√µes inteiras para "4258ùë•
  + 147ùë¶ = 369", primeiro reescreva como "4258ùë• ‚â° 369 (mod 147)" e
  depois resolva:

  >>> x = 369 * pow(4258, -1, 147) % 147
  >>> y = (4258 * x - 369) // -147
  >>> 4258 * x + 147 * y
  369

  (Contribui√ß√£o de Mark Dickinson em bpo-36027.)

* As compreens√µes de dict foram sincronizadas com literais de dict,
  para que a chave seja computada primeiro e o valor em segundo:

     >>> # Dict comprehension
     >>> cast = {input('role? '): input('actor? ') for i in range(2)}
     role? King Arthur
     actor? Chapman
     role? Black Knight
     actor? Cleese

     >>> # Dict literal
     >>> cast = {input('role? '): input('actor? ')}
     role? Sir Robin
     actor? Eric Idle

  A ordem de execu√ß√£o garantida √© √∫til nas express√µes de atribui√ß√£o,
  porque as vari√°veis atribu√≠das na express√£o de chave estar√£o
  dispon√≠veis na express√£o de valor:

     >>> names = ['Martin von L√∂wis', '≈Åukasz Langa', 'Walter D√∂rwald']
     >>> {(n := normalize('NFC', name)).casefold() : n for name in names}
     {'martin von l√∂wis': 'Martin von L√∂wis',
      '≈Çukasz langa': '≈Åukasz Langa',
      'walter d√∂rwald': 'Walter D√∂rwald'}

  (Contribui√ß√£o de J√∂rn Heissler em bpo-35224.)

* O m√©todo "object.__reduce__()" agora pode retornar uma tupla de dois
  a seis elementos. Anteriormente, cinco era o limite. O novo sexto
  elemento opcional √© um cham√°vel com uma assinatura "(obj, state)".
  Isso permite o controle direto sobre o comportamento de atualiza√ß√£o
  de estado de um objeto espec√≠fico. Caso contr√°rio, *None*, esse
  cham√°vel ter√° prioridade sobre o m√©todo "__setstate__()" do objeto.
  (Contribui√ß√£o de Pierre Glaser e Olivier Grisel em bpo-35900.)


Novos m√≥dulos
=============

* O novo m√≥dulo "importlib.metadata" fornece suporte (provis√≥rio) para
  a leitura de metadados de pacotes de terceiros. Por exemplo, ele
  pode extrair o n√∫mero da vers√£o de um pacote instalado, a lista de
  pontos de entrada e muito mais:

     >>> # Note following example requires that the popular "requests"
     >>> # package has been installed.
     >>>
     >>> from importlib.metadata import version, requires, files
     >>> version('requests')
     '2.22.0'
     >>> list(requires('requests'))
     ['chardet (<3.1.0,>=3.0.2)']
     >>> list(files('requests'))[:5]
     [PackagePath('requests-2.22.0.dist-info/INSTALLER'),
      PackagePath('requests-2.22.0.dist-info/LICENSE'),
      PackagePath('requests-2.22.0.dist-info/METADATA'),
      PackagePath('requests-2.22.0.dist-info/RECORD'),
      PackagePath('requests-2.22.0.dist-info/WHEEL')]

  (Contribui√ß√£o de Barry Warsaw e Jason R. Coombs em bpo-34632.)


M√≥dulos melhorados
==================


ast
---

Os n√≥s de AST agora t√™m os atributos "end_lineno" e "end_col_offset",
que fornecem a localiza√ß√£o precisa do final do n√≥. (Isso se aplica
apenas aos n√≥s que possuem os atributos "lineno" e "col_offset".)

Nova fun√ß√£o "ast.get_source_segment()" retorna o c√≥digo-fonte para um
n√≥ AST espec√≠fico.

(Contribui√ß√£o de Ivan Levkivskyi em bpo-33416.)

A fun√ß√£o "ast.parse()" possui alguns novos sinalizadores:

* "type_comments=True" faz com que retorne o texto dos coment√°rios de
  tipos de **PEP 484** e **PEP 526** associados a determinados n√≥s
  AST;

* "mode='func_type'" pode ser usado para analisar "coment√°rios do tipo
  de assinatura" do **PEP 484** (retornados para n√≥s AST de defini√ß√£o
  de fun√ß√£o);

* "feature_version=(3, N)" permite especificar uma vers√£o anterior do
  Python 3. Por exemplo, "feature_version=(3, 4)" tratar√° "async" e
  "await" como palavras n√£o reservadas.

(Contribui√ß√£o de Guido van Rossum em bpo-35766.)


asyncio
-------

"asyncio.run()" passou da API provis√≥ria para a est√°vel. Esta fun√ß√£o
pode ser usada para executar uma *corrotina* e retornar o resultado
enquanto gerencia automaticamente o loop de eventos. Por exemplo:

   import asyncio

   async def main():
       await asyncio.sleep(0)
       return 42

   asyncio.run(main())

Isso √© *aproximadamente* equivalente a:

   import asyncio

   async def main():
       await asyncio.sleep(0)
       return 42

   loop = asyncio.new_event_loop()
   asyncio.set_event_loop(loop)
   try:
       loop.run_until_complete(main())
   finally:
       asyncio.set_event_loop(None)
       loop.close()

A implementa√ß√£o real √© significativamente mais complexa. Assim,
"asyncio.run()" deve ser a maneira preferida de executar programas
ass√≠ncronos.

(Contribui√ß√£o de Yury Selivanov em bpo-32314.)

A execu√ß√£o de "python -m asyncio" lan√ßa um REPL nativo ass√≠ncrono.
Isso permite a experimenta√ß√£o r√°pida de c√≥digo que possui um n√≠vel
superior "await". N√£o √© mais necess√°rio chamar diretamente
"asyncio.run()", o que geraria um novo loop de evento a cada chamada:

   $ python -m asyncio
   asyncio REPL 3.8.0
   Use "await" directly instead of "asyncio.run()".
   Type "help", "copyright", "credits" or "license" for more information.
   >>> import asyncio
   >>> await asyncio.sleep(10, result='hello')
   hello

(Contribui√ß√£o de Yury Selivanov em bpo-37028.)

A exce√ß√£o "asyncio.CancelledError" agora herda de "BaseException" em
vez de "Exception" e n√£o mais herda de
"concurrent.futures.CancelledError". (Contribui√ß√£o de Yury Selivanov
em bpo-32528.)

No Windows, o loop de eventos padr√£o √© agora "ProactorEventLoop".
(Contribui√ß√£o de Victor Stinner em bpo-34687.)

"ProactorEventLoop" agora tamb√©m tem suporte a UDP. (Contribui√ß√£o de
Adam Meily e Andrew Svetlov em bpo-29883.)

"ProactorEventLoop" pode agora ser interrompido por
"KeyboardInterrupt" ("CTRL+C"). (Contribui√ß√£o de Vladimir Matveev em
bpo-23057.)

Adicionado "asyncio.Task.get_coro()" para obter a corrotina de dentro
de um "asyncio.Task". (Contribui√ß√£o de Alex Gr√∂nholm em bpo-36999.)

As tarefas de asyncio agora podem ser nomeadas, passando o argumento
nomeado "name" para "asyncio.create_task()" ou o m√©todo de loop de
evento "create_task()" ou chamando o m√©todo "set_name()" no objeto de
tarefa. O nome da tarefa √© vis√≠vel na sa√≠da de "repr()" de
"asyncio.Task" e tamb√©m pode ser recuperado usando o m√©todo
"get_name()". (Contribui√ß√£o de Alex Gr√∂nholm em bpo-34270.)

Adicionado suporte a Happy Eyeballs para
"asyncio.loop.create_connection()". Para especificar o comportamento,
dois novos par√¢metros foram adicionados: *happy_eyeballs_delay* e
*interleave*. O algoritmo Happy Eyeballs melhora a capacidade de
resposta em aplicativos compat√≠veis com IPv4 e IPv6, tentando
conectar-se simultaneamente usando os dois. (Contribui√ß√£o de
twisteroid ambassador em bpo-33530.)


builtins
--------

A fun√ß√£o embutida "compile()" foi aprimorada para aceitar o
sinalizador "ast.PyCF_ALLOW_TOP_LEVEL_AWAIT". Com esse novo
sinalizador passado, "compile()" permitir√° constru√ß√µes de n√≠vel
superior "await", "async for" e "async with" que geralmente s√£o
consideradas sintaxe inv√°lida. O objeto de c√≥digo ass√≠ncrono marcado
com o sinalizador "CO_COROUTINE" pode ser retornado. (Contribui√ß√£o de
Matthias Bussonnier em bpo-34616)


collections
-----------

O m√©todo "_asdict()" para "collections.namedtuple()" agora retorna a
"dict" em vez de um "collections.OrderedDict". Isso funciona porque os
dict regulares garantem pedidos desde o Python 3.7. Se os recursos
extras de "OrderedDict" forem necess√°rios, a solu√ß√£o sugerida √©
converter o resultado no tipo desejado: "OrderedDict(nt._asdict())".
(Contribui√ß√£o de Raymond Hettinger em bpo-35864.)


cProfile
--------

A classe "cProfile.Profile" agora pode ser usada como um gerenciador
de contexto. Perfile um bloco de c√≥digo executando:

   import cProfile

   with cProfile.Profile() as profiler:
         # code to be profiled
         ...

(Contribui√ß√£o de Scott Sanderson em bpo-29235.)


csv
---

O "csv.DictReader" agora retorna inst√¢ncias de "dict" em vez de um
"collections.OrderedDict". Agora, a ferramenta √© mais r√°pida e utiliza
menos mem√≥ria enquanto preserva a ordem dos campos. (Contribui√ß√£o de
Michael Selik em bpo-34003.)


curses
------

Adicionada uma nova vari√°vel contendo informa√ß√µes de vers√£o
estruturada para a biblioteca ncurses subjacente: "ncurses_version".
(Contribui√ß√£o de Serhiy Storchaka em bpo-31680.)


ctypes
------

No Windows, "CDLL" e subclasses agora aceitam um par√¢metro *winmode*
para especificar sinalizadores para a chamada subjacente
"LoadLibraryEx". Os sinalizadores padr√£o s√£o definidos para carregar
apenas depend√™ncias da DLL em locais confi√°veis, incluindo o caminho
em que a DLL est√° armazenada (se um caminho completo ou parcial for
usado para carregar a DLL inicial) e os caminhos adicionados por
"add_dll_directory()" . (Contribui√ß√£o de Steve Dower em bpo-36085.)


datetime
--------

Added new alternate constructors "datetime.date.fromisocalendar()" and
"datetime.datetime.fromisocalendar()", which construct "date" and
"datetime" objects respectively from ISO year, week number, and
weekday; these are the inverse of each class's "isocalendar" method.
(Contributed by Paul Ganssle in bpo-36004.)


functools
---------

"functools.lru_cache()" agora pode ser usado como um decorador direto,
e n√£o como uma fun√ß√£o retornando um decorador. Portanto, agora ambos
s√£o suportados:

   @lru_cache
   def f(x):
       ...

   @lru_cache(maxsize=256)
   def f(x):
       ...

(Contribui√ß√£o de Raymond Hettinger em bpo-36772.)

Adicionado um novo decorador "functools.cached_property()", para
propriedades computadas armazenadas em cache durante toda a vida √∫til
da inst√¢ncia.

   import functools
   import statistics

   class Dataset:
      def __init__(self, sequence_of_numbers):
         self.data = sequence_of_numbers

      @functools.cached_property
      def variance(self):
         return statistics.variance(self.data)

(Contribui√ß√£o de Carl Meyer em bpo-21145)

Adicionado um novo decorador "functools.singledispatchmethod()" que
converte m√©todos em *fun√ß√µes gen√©ricas* usando *despacho √∫nico*:

   from functools import singledispatchmethod
   from contextlib import suppress

   class TaskManager:

       def __init__(self, tasks):
           self.tasks = list(tasks)

       @singledispatchmethod
       def discard(self, value):
           with suppress(ValueError):
               self.tasks.remove(value)

       @discard.register(list)
       def _(self, tasks):
           targets = set(tasks)
           self.tasks = [x for x in self.tasks if x not in targets]

(Contribui√ß√£o de Ethan Smith em bpo-32380)


gc
--

"get_objects()" agora pode receber um par√¢metro opcional *generation*
indicando uma gera√ß√£o da qual obter objetos. (Contribui√ß√£o de Pablo
Galindo em bpo-36016.)


gettext
-------

Adicionado "pgettext()" e suas variantes. (Contribui√ß√£o de Franz
Glasner, √âric Araujo e Cheryl Sabella em bpo-2504.)


gzip
----

Adicionado o par√¢metro *mtime* em "gzip.compress()" para sa√≠da
reproduz√≠vel. (Contribui√ß√£o de Guo Ci Teo em bpo-34898.)

A exce√ß√£o "BadGzipFile" agora √© levantada em vez de "OSError" para
certos tipos de arquivos gzip inv√°lidos ou corrompidos. (Contribui√ß√£o
de Filip Gruszczy≈Ñski, Michele Orr√π e Zackery Spytz em bpo-6584.)


IDLE e idlelib
--------------

A sa√≠da em N linhas (50 por padr√£o) √© compactada at√© um limite
inferior. N pode ser alterado na se√ß√£o PyShell da p√°gina General da
caixa de di√°logo Settings. Menos linhas, mas possivelmente extra
longas, podem ser espremidas clicando com o bot√£o direito do mouse na
sa√≠da. A sa√≠da compactada pode ser expandida no local clicando duas
vezes no bot√£o ou na √°rea de transfer√™ncia ou em uma janela separada
clicando com o bot√£o direito do mouse. (Contribui√ß√£o de Tal Einat em
bpo-1529353.)

Adiciona "Run Customized" ao menu Executar para executar um m√≥dulo com
configura√ß√µes personalizadas. Quaisquer argumentos de linha de comando
inseridos s√£o adicionados ao sys.argv. Eles tamb√©m reaparecem na caixa
para a pr√≥xima execu√ß√£o personalizada. Pode-se tamb√©m suprimir a
reinicializa√ß√£o normal do m√≥dulo principal do console. (Contribui√ß√£o
de Cheryl Sabella, Terry Jan Reedy e outros em bpo-5680 e bpo-37627.)

Adicionados n√∫meros de linha opcionais para janelas do editor IDLE. O
Windows √© aberto sem n√∫meros de linha, a menos que definido de outra
forma na guia General da caixa de di√°logo de configura√ß√£o. Os n√∫meros
de linha de uma janela existente s√£o mostrados e ocultos no menu
Op√ß√µes. (Contribui√ß√£o de Tal Einat e Saimadhav Heblikar em bpo-17535.)

A codifica√ß√£o nativa do sistema operacional agora √© usada para
converter entre strings Python e objetos Tcl. Isso permite que o IDLE
trabalhe com emoji e outros caracteres n√£o BMP. Esses caracteres podem
ser exibidos ou copiados e colados na ou da √°rea de transfer√™ncia. A
convers√£o de strings de Tcl para Python e de volta agora nunca falha.
(Muitas pessoas trabalharam nisso por oito anos, mas o problema foi
finalmente resolvido por Serhiy Storchaka em bpo-13153.)

Novo em 3.8.1:

Adiciona a op√ß√£o para ativar e desativar o piscar do cursor.
(Contribui√ß√£o de Zackery Spytz na bpo-4603.)

A tecla Escape agora fecha as janelas de conclus√£o IDLE. (Contribui√ß√£o
de Johnny Najera em bpo-38944.)

As altera√ß√µes acima foram suportadas para vers√µes de manuten√ß√£o 3.7.

Adiciona argumentos nomeados √† lista de completamento de nome de
m√≥dulo. (Contribui√ß√£o de Terry J. Reedy em bpo-37765.)


inspect
-------

A fun√ß√£o "inspect.getdoc()" agora pode encontrar docstrings para
"__slots__" se esse atributo for "dict" onde os valores s√£o
docstrings. Isso fornece op√ß√µes de documenta√ß√£o semelhantes √†s que j√°
temos para "property()", "classmethod()" e "staticmethod()":

   class AudioClip:
       __slots__ = {'bit_rate': 'expressed in kilohertz to one decimal place',
                    'duration': 'in seconds, rounded up to an integer'}
       def __init__(self, bit_rate, duration):
           self.bit_rate = round(bit_rate / 1000.0, 1)
           self.duration = ceil(duration)

(Contribui√ß√£o de Raymond Hettinger em bpo-36326.)


io
--

No modo de desenvolvimento ("-X" "env") e na compila√ß√£o de depura√ß√£o,
o finalizador "io.IOBase" agora registra a exce√ß√£o se o m√©todo
"close()" falhar. A exce√ß√£o √© ignorada silenciosamente por padr√£o na
compila√ß√£o de lan√ßamento. (Contribui√ß√£o de Victor Stinner em
bpo-18748.)


itertools
---------

A fun√ß√£o "itertools.accumulate()" adicionou uma op√ß√£o de argumento
nomeado *initial* para especificar um valor inicial:

   >>> from itertools import accumulate
   >>> list(accumulate([10, 5, 30, 15], initial=1000))
   [1000, 1010, 1015, 1045, 1060]

(Contribu√≠do por Lisa Roach em bpo-34659.)


json.tool
---------

Adiciona a op√ß√£o "--json-lines" para analisar cada linha de entrada
como um objeto JSON separado. (Contribui√ß√£o de Weipeng Hong em
bpo-31553.)


logging
-------

Adicionado um argumento nomeado *force* em "logging.basicConfig()"
Quando definido como true, qualquer manipulador existente anexado ao
logger raiz √© removido e fechado antes de executar a configura√ß√£o
especificada pelos outros argumentos.

Isso resolve um problema de longa data. Depois que um logger ou
*basicConfig()* foi chamado, as chamadas subsequentes para
*basicConfig()* foram ignoradas silenciosamente. Isso dificultava a
atualiza√ß√£o, a experimenta√ß√£o ou o ensino das v√°rias op√ß√µes de
configura√ß√£o de log usando o prompt interativo ou um bloco de notas de
Jupyter.

(Sugest√£o de Raymond Hettinger, implementa√ß√£o de Dong-hee Na e revis√£o
de Vinay Sajip em bpo-33897.)


math
----

Adicionada nova fun√ß√£o "math.dist()" para calcular a dist√¢ncia
euclidiana entre dois pontos. (Contribui√ß√£o de Raymond Hettinger em
bpo-33089.)

Expandida a fun√ß√£o "math.hypot()" para manipular v√°rias dimens√µes.
Anteriormente, suportava apenas o caso 2-D. (Contribui√ß√£o de Raymond
Hettinger em bpo-33089.)

Adicionada nova fun√ß√£o, "math.prod()", como fun√ß√£o an√°loga a "sum()"
que retorna o produto de um valor 'start' (padr√£o: 1) vezes uma
iter√°vel de n√∫meros:

   >>> prior = 0.8
   >>> likelihoods = [0.625, 0.84, 0.30]
   >>> math.prod(likelihoods, start=prior)
   0.126

(Contribui√ß√£o de Pablo Galindo em bpo-35606.)

Adicionadas duas novas fun√ß√µes combinat√≥rias "math.perm()" e
"math.comb()":

   >>> math.perm(10, 3)    # Permutations of 10 things taken 3 at a time
   720
   >>> math.comb(10, 3)    # Combinations of 10 things taken 3 at a time
   120

(Contribui√ß√£o de Yash Aggarwal, Keller Fuchs, Serhiy Storchaka e
Raymond Hettinger em bpo-37128, bpo-37178 e bpo-35431.)

Adicionada uma nova fun√ß√£o "math.isqrt()" para calcular ra√≠zes
quadradas inteiras precisas sem convers√£o para ponto flutuante. A nova
fun√ß√£o suporta n√∫meros inteiros arbitrariamente grandes. √â mais r√°pido
que "floor(sqrt(n))", mas mais lento que "math.sqrt()":

   >>> r = 650320427
   >>> s = r ** 2
   >>> isqrt(s - 1)         # correct
   650320426
   >>> floor(sqrt(s - 1))   # incorrect
   650320427

(Contribui√ß√£o de Mark Dickinson em bpo-36887.)

A fun√ß√£o "math.factorial()" n√£o aceita mais argumentos que n√£o s√£o
parecidos com int. (Contribui√ß√£o de Pablo Galindo em bpo-33083.)


mmap
----

A classe "mmap.mmap" agora possui o m√©todo "madvise()" para acessar a
chamada do sistema "madvise()". (Contribui√ß√£o de Zackery Spytz em
bpo-32941.)


multiprocessing
---------------

Adicionado novo m√≥dulo "multiprocessing.shared_memory". (Contribui√ß√£o
de Davin Potts em bpo-35813.)

No macOS, o m√©todo inicial *spawn* agora √© usado por padr√£o.
(Contribui√ß√£o de Victor Stinner em bpo-33725.)


os
--

Adicionada nova fun√ß√£o "add_dll_directory()" no Windows para fornecer
caminhos de pesquisa adicionais para depend√™ncias nativas ao importar
m√≥dulos de extens√£o ou carregar DLLs usando "ctypes". (Contribui√ß√£o de
Steve Dower em bpo-36085.)

Uma nova fun√ß√£o "os.memfd_create()" foi adicionada para envolver a
chamada de sistema "memfd_create()". (Contribui√ß√£o de Zackery Spytz e
Christian Heimes em bpo-26836.)

No Windows, grande parte da l√≥gica manual para manipular pontos de
nova an√°lise (incluindo links simb√≥licos e jun√ß√µes de diret√≥rio) foi
delegada ao sistema operacional. Especificamente, "os.stat()" agora
percorrer√° qualquer coisa suportada pelo sistema operacional, enquanto
"os.lstat()" abrir√° apenas pontos de nova an√°lise que se identificam
como "substitutos de nome" enquanto outros s√£o abertos como
"os.stat()". Em todos os casos, "stat_result.st_mode" ter√° apenas
"S_IFLNK" definido para links simb√≥licos e n√£o para outros tipos de
pontos de nova an√°lise. Para identificar outros tipos de pontos de
nova an√°lise, verifique o novo atributo "stat_result.st_reparse_tag".

No Windows, "os.readlink()" agora pode ler jun√ß√µes de diret√≥rio.
Observe que "islink()" retornar√° "False" para jun√ß√µes de diret√≥rio e,
portanto, o c√≥digo que verifica primeiro "islink" continuar√° tratando
jun√ß√µes como diret√≥rios, enquanto o c√≥digo que lida com erros de
"os.readlink()" agora pode tratar jun√ß√µes como links.

(Contribui√ß√£o de Steve Dower em bpo-37834.)


os.path
-------

Fun√ß√µes de "os.path" que retornam um resultado booleano como
"exists()", "lexists()", "isdir()", "isfile()", "islink()" e
"ismount()" agora retornam "False" em vez de levantar "ValueError" ou
suas subclasses "UnicodeEncodeError" e "UnicodeDecodeError" para
caminhos que cont√™m caracteres ou bytes n√£o represent√°veis no n√≠vel do
SO. (Contribui√ß√£o de Serhiy Storchaka em bpo-33721.)

"expanduser()" no Windows agora prefere a vari√°vel de ambiente
"USERPROFILE" e n√£o usa "HOME", que normalmente n√£o √© definido para
contas de usu√°rio comuns. (Contribui√ß√£o de Anthony Sottile em
bpo-36264.)

"isdir()" no Windows n√£o retorna mais "True" para um link para um
diret√≥rio inexistente.

"realpath()" no Windows agora resolve pontos de nova an√°lise,
incluindo links simb√≥licos e jun√ß√µes de diret√≥rio.

(Contribui√ß√£o de Steve Dower em bpo-37834.)


pathlib
-------

"pathlib.Path" m√©todos que retornam um resultado booleano como
"exists()", "is_dir()", "is_file()", "is_mount()", "is_symlink()",
"is_block_device()", "is_char_device()", "is_fifo()", "is_socket()"
agora retorna "False" ao inv√©s de levantar "ValueError" ou sua
subclasse "UnicodeEncodeError" para caminhos que cont√™m caracteres n√£o
represent√°veis no n√≠vel do SO. (Contribui√ß√£o de Serhiy Storchaka em
bpo-33721.)

Added "pathlib.Path.link_to()" which creates a hard link pointing to a
path. (Contributed by Joannah Nanjekye in bpo-26978) Note that
"link_to" was deprecated in 3.10 and removed in 3.12 in favor of a
"hardlink_to" method added in 3.10 which matches the semantics of the
existing "symlink_to" method.


pickle
------

Extens√µes de "pickle", que atuem como subclasse da classe otimizada
para C "Pickler", agora podem substituir a l√≥gica de "pickling" de
fun√ß√µes e classes definindo o m√©todo especial "reducer_override()".
(Contribui√ß√£o de Pierre Glaser e Olivier Grisel em bpo-35900.)


plistlib
--------

Adicionado novo "plistlib.UID" e habilitado suporte para leitura e
escrita de plists bin√°rias codificadas em NSKeyedArchiver.
(Contribui√ß√£o de Jon Janzen em bpo-26707.)


pprint
------

O m√≥dulo "pprint" adicionou um par√¢metro *sort_dicts* a v√°rias
fun√ß√µes. Por padr√£o, essas fun√ß√µes continuam a classificar dicion√°rios
antes da renderiza√ß√£o ou impress√£o. No entanto, se *sort_dicts*
estiver definido como false, os dicion√°rios manter√£o a ordem em que as
chaves foram inseridas. Isso pode ser √∫til para compara√ß√£o com
entradas JSON durante a depura√ß√£o.

Al√©m disso, existe uma nova fun√ß√£o de conveni√™ncia, "pprint.pp()", que
√© como "pprint.pprint()", mas com *sort_dicts* padronizando como
"False":

   >>> from pprint import pprint, pp
   >>> d = dict(source='input.txt', operation='filter', destination='output.txt')
   >>> pp(d, width=40)                  # Original order
   {'source': 'input.txt',
    'operation': 'filter',
    'destination': 'output.txt'}
   >>> pprint(d, width=40)              # Keys sorted alphabetically
   {'destination': 'output.txt',
    'operation': 'filter',
    'source': 'input.txt'}

(Contribui√ß√£o de R√©mi Lapeyre em bpo-30670.)


py_compile
----------

"py_compile.compile()" agora possui suporte a um modo silencioso.
(Contribui√ß√£o de Joannah Nanjekye em bpo-22640.)


shlex
-----

A nova fun√ß√£o "shlex.join()" atua como o inverso da "shlex.split()".
(Contribui√ß√£o de Bo Bayles em bpo-32102.)


shutil
------

"shutil.copytree()" agora aceita um novo argumento nomeado
"dirs_exist_ok". (Contribui√ß√£o de Josh Bronson em bpo-20849.)

"shutil.make_archive()" agora tem como p√°dr√£o o formato pax moderno
(POSIX.1-2001) de novos arquivos para melhorar a portabilidade e a
conformidade com os padr√µes, herdados da altera√ß√£o correspondente no
m√≥dulo "tarfile". (Contribui√ß√£o de C.A.M. Gerlach em bpo-30661.)

"shutil.rmtree()" no Windows agora remove jun√ß√µes de diret√≥rios sem
remover recursivamente o conte√∫do primeiro. (Contribui√ß√£o de Steve
Dower em bpo-37834.)


socket
------

Adicionadas as fun√ß√µes de conveni√™ncia "create_server()" e
"has_dualstack_ipv6()" para automatizar as tarefas necess√°rias
geralmente envolvidas na cria√ß√£o de um soquete de servidor, incluindo
a aceita√ß√£o de conex√µes IPv4 e IPv6 no mesmo soquete. (Contribui√ß√£o de
Giampaolo Rodol√† em bpo-17561.)

As fun√ß√µes "socket.if_nameindex()", "socket.if_nametoindex()" e
"socket.if_indextoname()" foram agora implementadas no Windows.
(Contribui√ß√£o de Zackery Spytz em bpo-37007.)


ssl
---

Adicionado "post_handshake_auth" para ativar e
"verify_client_post_handshake()" para iniciar a autentica√ß√£o p√≥s-
handshake do TLS 1.3. (Contribui√ß√£o de Christian Heimes em bpo-34670.)


statistics
----------

Adicionada "statistics.fmean()" como uma variante de ponto flutuante
mais r√°pida de "statistics.mean()". (Contribui√ß√£o de Raymond Hettinger
e Steven D'Aprano em bpo-35904.)

Adicionada "statistics.geometric_mean()" (Contribui√ß√£o de Raymond
Hettinger em bpo-27181.)

Adicionada "Statistics.multimode()" que retorna uma lista dos valores
mais comuns. (Contribui√ß√£o de Raymond Hettinger em bpo-35892.)

Adicionada "statistics.quantiles()" que divide dados ou uma
distribui√ß√£o em intervalos equivalentes (por exemplo, quartis, decis
ou percentis). (Contribui√ß√£o de Raymond Hettinger em bpo-36546.)

Adicionada "statistics.NormalDist", uma ferramenta para criar e
manipular distribui√ß√µes normais de uma vari√°vel aleat√≥ria.
(Contribui√ß√£o de Raymond Hettinger em bpo-36018.)

   >>> temperature_feb = NormalDist.from_samples([4, 12, -3, 2, 7, 14])
   >>> temperature_feb.mean
   6.0
   >>> temperature_feb.stdev
   6.356099432828281

   >>> temperature_feb.cdf(3)            # Chance of being under 3 degrees
   0.3184678262814532
   >>> # Relative chance of being 7 degrees versus 10 degrees
   >>> temperature_feb.pdf(7) / temperature_feb.pdf(10)
   1.2039930378537762

   >>> el_ni√±o = NormalDist(4, 2.5)
   >>> temperature_feb += el_ni√±o        # Add in a climate effect
   >>> temperature_feb
   NormalDist(mu=10.0, sigma=6.830080526611674)

   >>> temperature_feb * (9/5) + 32      # Convert to Fahrenheit
   NormalDist(mu=50.0, sigma=12.294144947901014)
   >>> temperature_feb.samples(3)        # Generate random samples
   [7.672102882379219, 12.000027119750287, 4.647488369766392]


sys
---

Adiciona uma nova fun√ß√£o "sys.unraisablehook()", que pode ser
substitu√≠da para controlar como as "exce√ß√µes n√£o pass√≠veis de
levantamento" s√£o tratadas. √â chamada quando uma exce√ß√£o ocorre, mas
n√£o h√° como o Python manipul√°-la. Por exemplo, quando um destruidor
gera uma exce√ß√£o ou durante a coleta de lixo ("gc.collect()").
(Contribui√ß√£o de Victor Stinner em bpo-36829.)


tarfile
-------

O m√≥dulo "tarfile" agora tem como padr√£o o formato pax moderno
(POSIX.1-2001) para novos arquivos, em vez do anterior espec√≠fico do
GNU. Isso melhora a portabilidade de plataforma cruzada com uma
codifica√ß√£o consistente (UTF-8) em um formato padronizado e extens√≠vel
e oferece v√°rios outros benef√≠cios. (Contribui√ß√£o de C.A.M. Gerlach em
bpo-36268.)


threading
---------

Adiciona uma nova fun√ß√£o "threading.excepthook()" que manipula a
exce√ß√£o n√£o capturada "threading.Thread.run()". Pode ser substitu√≠da
para controlar como exce√ß√µes n√£o capturadas "threading.Thread.run()"
s√£o manipuladas. (Contribui√ß√£o de Victor Stinner em bpo-1230540.)

Adiciona uma nova fun√ß√£o "threading.get_native_id()" e um atributo
"native_id" √† classe "threading.Thread". Eles retornam o Thread ID
integral nativo do thread atual atribu√≠do pelo kernel. Este recurso
est√° dispon√≠vel apenas em determinadas plataformas, consulte
"get_native_id" para mais informa√ß√µes. (Contribui√ß√£o de Jake Tesler em
bpo-36084.)


tokenize
--------

O m√≥dulo "tokenize" agora emite implicitamente um token "NEWLINE"
quando fornecido com entrada que n√£o possui uma nova linha √† direita.
Esse comportamento agora corresponde ao que o tokenizador do C faz
internamente. (Contribui√ß√£o de Ammar Askar em bpo-33899.)


tkinter
-------

Adicionados os m√©todos "selection_from()", "selection_present()",
"selection_range()" e "selection_to()" √† classe "tkinter.Spinbox".
(Contribui√ß√£o de Juliette Monsel em bpo-34829.)

Adicionado o m√©todo "moveto()" na classe "tkinter.Canvas".
(Contribui√ß√£o de Juliette Monsel em bpo-23831.)

A classe "tkinter.PhotoImage" agore tem os m√©todos
"transparency_get()" e "transparency_set()". (Contribui√ß√£o de Zackery
Spytz em bpo-25451.)


time
----

Adiciona o novo rel√≥gio "CLOCK_UPTIME_RAW" ao macOS 10.12.
(Contribui√ß√£o de Joannah Nanjekye em bpo-35702.)


typing
------

O m√≥dulo "typing" incorpora v√°rios novos recursos:

* Um tipo de dicion√°rio com tipos por chave. Veja **PEP 589** e
  "typing.TypedDict". TypedDict usa apenas chaves de strings. Por
  padr√£o, √© necess√°rio que todas as chaves estejam presentes.
  Especifique "total=False" para permitir que as chaves sejam
  opcionais:

     class Location(TypedDict, total=False):
         lat_long: tuple
         grid_square: str
         xy_coordinate: tuple

* Tipos literais. Veja **PEP 586** e "typing.Literal". Tipos literais
  indicam que um par√¢metro ou valor de retorno est√° restrito a um ou
  mais valores literais espec√≠ficos:

     def get_status(port: int) -> Literal['connected', 'disconnected']:
         ...

* Vari√°veis, fun√ß√µes, m√©todos e classes "finais". Veja **PEP 591**,
  "typing.Final" e "typing.final()". O qualificador final instrui um
  verificador de tipo est√°tico a restringir cria√ß√£o de subclasse,
  substitui√ß√£o ou reatribui√ß√£o:

     pi: Final[float] = 3.1415926536

* Defini√ß√µes de protocolo. Veja **PEP 544**, "typing.Protocol" e
  "typing.runtime_checkable()". ABCs simples como "typing.SupportsInt"
  agora s√£o subclasses de "Protocol".

* Nova classe de protocolo "typing.SupportsIndex".

* Novas fun√ß√µes "typing.get_origin()" e "typing.get_args()".


unicodedata
-----------

O m√≥dulo "unicodedata" agora foi atualizado para usar o Unicode
12.1.0.

A nova fun√ß√£o "is_normalized()" pode ser usada para verificar se uma
string est√° em uma forma normal espec√≠fica, geralmente muito mais
r√°pida do que normalizar a string. (Contribui√ß√£o de Max Belanger,
David Euresti e Greg Price em bpo-32285 e bpo-37966).


unittest
--------

Adicionada "AsyncMock" para dar suporte a uma vers√£o ass√≠ncrona de
"Mock". Tamb√©m foram adicionadas novas fun√ß√µes apropriadas para teste.
(Contribui√ß√£o de Lisa Roach em bpo-26467).

Adicionados "addModuleCleanup()" e "addClassCleanup()" a unittest para
dar suporte a limpezas para "setUpModule()" e "setUpClass()".
(Contribui√ß√£o de Lisa Roach em bpo-24412.)

V√°rias fun√ß√µes de declara√ß√£o de mock agora tamb√©m exibem uma lista de
chamadas reais em caso de falha. (Contribui√ß√£o de Petter Strandmark em
bpo-35047.)

O m√≥dulo "unittest" ganhou suporte a corrotinas a serem usadas como
casos de teste com "unittest.IsolatedAsyncioTestCase". (Contribui√ß√£o
de Andrew Svetlov em bpo-32972.)

Exemplo:

   import unittest


   class TestRequest(unittest.IsolatedAsyncioTestCase):

       async def asyncSetUp(self):
           self.connection = await AsyncConnection()

       async def test_get(self):
           response = await self.connection.get("https://example.com")
           self.assertEqual(response.status_code, 200)

       async def asyncTearDown(self):
           await self.connection.close()


   if __name__ == "__main__":
       unittest.main()


venv
----

"venv" agora inclui um script "Activate.ps1" em todas as plataformas
para ativar ambientes virtuais no PowerShell Core 6.1. (Contribui√ß√£o
de Brett Cannon em bpo-32718.)


weakref
-------

Os objetos proxy retornados por "weakref.proxy()" agora possuem
suporte aos operadores de multiplica√ß√£o de matrizes "@" e "@=" al√©m
dos outros operadores num√©ricos. (Contribui√ß√£o de Mark Dickinson em
bpo-36669.)


xml
---

Como atenua√ß√£o a DTD e recupera√ß√£o de entidade externa, os m√≥dulos
"xml.dom.minidom" e "xml.sax" n√£o processam mais entidades externas
por padr√£o. (Contribui√ß√£o de Christian Heimes em bpo-17239.)

Os m√©todos ".find*()" no m√≥dulo "xml.etree.ElementTree" possuem
suporte a pesquisas curinga como "{*}tag", que ignora o espa√ßo para
nome e "{namespace}*", que retorna todas as tags no espa√ßo para nome
especificado. (Contribui√ß√£o de Stefan Behnel em bpo-28238.)

O m√≥dulo "xml.etree.ElementTree" fornece uma nova fun√ß√£o
"‚Äìxml.etree.ElementTree.canonicalize()" que implementa o C14N 2.0.
(Contribui√ß√£o de Stefan Behnel em bpo-13611.)

O objeto de destino de "xml.etree.ElementTree.XMLParser" pode receber
eventos de declara√ß√£o de espa√ßo de nomes atrav√©s dos novos m√©todos de
retorno de chamada "start_ns()" e "end_ns ()". Al√©m disso, o destino
"xml.etree.ElementTree.TreeBuilder" pode ser configurado para
processar eventos sobre coment√°rios e instru√ß√µes de processamento para
inclu√≠-los na √°rvore gerada. (Contribui√ß√£o de Stefan Behnel em
bpo-36676 e bpo-36673.)


xmlrpc
------

"xmlrpc.client.ServerProxy" agora possui suporte a um argumento
nomeado *headers* opcional para que uma sequ√™ncia de cabe√ßalhos HTTP
seja enviada a cada solicita√ß√£o. Entre outras coisas, isso possibilita
a atualiza√ß√£o da autentica√ß√£o b√°sica padr√£o para uma autentica√ß√£o de
sess√£o mais r√°pida. (Contribui√ß√£o de C√©dric Krier em bpo-35153.)


Otimiza√ß√µes
===========

* O m√≥dulo "subprocess" agora pode usar a fun√ß√£o "os.posix_spawn()" em
  alguns casos para obter melhor desempenho. Atualmente, ele √© usado
  apenas no macOS e Linux (usando glibc 2.24 ou mais recente) se todas
  essas condi√ß√µes forem atendidas:

  * *close_fds* ser false;

  * os par√¢metros *preexec_fn*, *pass_fds*, *cwd* and
    *start_new_session* n√£o estarem definidos;

  * o caminho *executable* conter um diret√≥rio.

  (Contribui√ß√£o de Joannah Nanjekye e Victor Stinner em bpo-35537.)

* "shutil.copyfile()", "shutil.copy()", "shutil.copy2()",
  "shutil.copytree()" e "shutil.copytree()" usam chamadas de sistema
  "fast-copy" espec√≠ficas da plataforma no Linux e no macOS para
  copiar o arquivo com mais efici√™ncia. "fast-copy" significa que a
  opera√ß√£o de c√≥pia ocorre dentro do kernel, evitando o uso de buffers
  de espa√ßo do usu√°rio no Python como em ""outfd.write(infd.read())"".
  No Windows, "shutil.copyfile()" usa um buffer padr√£o com tamanho
  maior (1 MiB em vez de 16 KiB) e √© usada uma variante de
  "shutil.copyfileobj()" baseada em "memoryview()". A velocidade de
  c√≥pia de um arquivo 512 MiB na mesma parti√ß√£o √© de aproximadamente
  +26% no Linux, +50% no macOS e +40% no Windows. Al√©m disso, muito
  menos ciclos de CPU s√£o consumidos. Veja a se√ß√£o Opera√ß√µes de c√≥pia
  eficientes dependentes da plataforma. (Contribui√ß√£o de Giampaolo
  Rodol√† em bpo-33671.)

* "shutil.copytree()" usa a fun√ß√£o "os.scandir()" e todas as fun√ß√µes
  de c√≥pia que dependem dela usam valores em cache de "os.stat()". A
  velocidade para copiar um diret√≥rio com 8000 arquivos √© de cerca de
  +9% no Linux, +20% no Windows e +30% em um compartilhamento SMB do
  Windows. Al√©m disso, o n√∫mero de chamadas de sistema "os.stat()" √©
  reduzido em 38%, tornando "shutil.copytree()" especialmente mais
  r√°pida em sistemas de arquivos em rede. (Contribui√ß√£o de Giampaolo
  Rodol√† em bpo-33695.)

* O protocolo padr√£o no m√≥dulo "pickle" agora √© o Protocolo 4,
  introduzido pela primeira vez no Python 3.4. Ele oferece melhor
  desempenho e tamanho menor em compara√ß√£o com o Protocolo 3
  dispon√≠vel desde o Python 3.0.

* Removido um membro "Py_ssize_t" de "PyGC_Head". O tamanho de todos
  os objetos rastreados pelo coletor de lixo (por exemplo, tupla,
  lista, ditado) √© reduzido em 4 ou 8 bytes. (Contribui√ß√£o de Inada
  Naoki em bpo-33597.)

* "uuid.UUID" agora usa "__slots__" para reduzir seu uso de espa√ßo de
  mem√≥ria. (Contribui√ß√£o de Wouter Bolsterlee e Tal Einat em
  bpo-30977)

* Melhor desempenho de "operator.itemgetter()" em 33%. Manipula√ß√£o de
  argumento otimizada e inclu√≠do um caminho r√°pido para o caso comum
  de um √∫nico √≠ndice inteiro n√£o negativo em uma tupla (que √© o caso
  de uso t√≠pico na biblioteca padr√£o). (Contribui√ß√£o de Raymond
  Hettinger em bpo-35664.)

* Pesquisas de campo aceleradas em "collections.namedtuple()". Agora
  elas s√£o duas vezes mais r√°pidas, tornando-as a forma mais r√°pida de
  pesquisa de vari√°veis de inst√¢ncia no Python. (Contribui√ß√£o de
  Raymond Hettinger, Pablo Galindo e Joe Jevnik, Serhiy Storchaka em
  bpo-32492.)

* O construtor "list" n√£o atribui globalmente o buffer interno do item
  se a entrada iter√°vel tiver um comprimento conhecido (a entrada
  implementa "__len__"). Isso torna a lista criada 12% menor em m√©dia.
  (Contribui√ß√£o de Raymond Hettinger e Pablo Galindo em bpo-33234.)

* Duplicada a velocidade de grava√ß√£o de vari√°vel de classe. Quando um
  atributo n√£o-dunder era atualizado, havia uma chamada desnecess√°ria
  para atualizar os slots. (Contribui√ß√£o de Stefan Behnel, Pablo
  Galindo Salgado, Raymond Hettinger, Neil Schemenauer e Serhiy
  Storchaka em bpo-36012.)

* Reduzida a sobrecarga dos argumentos de convers√£o passados para
  muitas fun√ß√µes e m√©todos internos. Isso acelerou chamando algumas
  fun√ß√µes e m√©todos internos simples de 20--50%. (Contribui√ß√£o de
  Serhiy Storchaka em bpo-23867, bpo-35582 e bpo-36127.)

* A instru√ß√£o "LOAD_GLOBAL" agora usa o novo mecanismo "por cache de
  c√≥digo de opera√ß√£o". √â cerca de 40% mais r√°pido agora. (Contribui√ß√£o
  de Yury Selivanov e Inada Naoki em :issue: *26219*.)


Altera√ß√µes a compila√ß√µes e API C
================================

* O "sys.abiflags" padr√£o se tornou uma string vazia: o sinalizador
  "m" para pymalloc se tornou in√∫til (compila√ß√µes com e sem pymalloc
  s√£o compat√≠veis com ABI) e, portanto, foi removido. (Contribui√ß√£o de
  Victor Stinner em bpo-36707.)

  Exemplos de altera√ß√µes:

  * Somente o programa "python3.8" √© instalado, o programa
    "python3.8m" se foi.

  * Somente o script "python3.8-config" √© instalado, o programa
    "python3.8m-config" se foi.

  * O sinalizador "m" foi removido do sufixo dos nomes de arquivos da
    biblioteca din√¢mica: m√≥dulos de extens√£o na biblioteca padr√£o, bem
    como daqueles produzidos e instalados por pacotes de terceiros,
    como os baixados do PyPI. No Linux, por exemplo, o sufixo de
    ".cpython-37m-x86_64-linux-gnu.so" do Python 3.7 se tornou
    ".cpython-38-x86_64-linux-gnu.so" no Python 3.8.

* Os arquivos de cabe√ßalho foram reorganizados para separar melhor os
  diferentes tipos de APIs:

  * "Include/*.h" deve ser a API C p√∫blica est√°vel e port√°til.

  * "Include/cpython/*.h" deve ser a API C inst√°vel espec√≠fica do
    CPython; API p√∫blica, com alguma API privada prefixada por "_Py"
    ou "_PY".

  * "Include/internal/*.h" √© a API C interna privada muito espec√≠fica
    do CPython. Essa API √© fornecida sem garantia de compatibilidade
    com vers√µes anteriores e n√£o deve ser usada fora do CPython. Ele √©
    exposto apenas a necessidades muito espec√≠ficas, como depuradores
    e perfis, que precisam acessar os componentes internos do CPython
    sem chamar fun√ß√µes. Esta API agora est√° instalada por "make
    install".

  (Contribui√ß√£o de Victor Stinner em bpo-35134 e bpo-35081, trabalho
  iniciado por Eric Snow em Python 3.7.)

* Algumas macros foram convertidas em fun√ß√µes in-line est√°ticas: os
  tipos de par√¢metros e o tipo de retorno s√£o bem definidos, eles n√£o
  t√™m problemas espec√≠ficos para as macros, as vari√°veis t√™m escopos
  locais. Exemplos:

  * "Py_INCREF()", "Py_DECREF()"

  * "Py_XINCREF()", "Py_XDECREF()"

  * "PyObject_INIT()", "PyObject_INIT_VAR()"

  * Fun√ß√µes privadas: "_PyObject_GC_TRACK()",
    "_PyObject_GC_UNTRACK()", "_Py_Dealloc()"

  (Contribui√ß√£o de Victor Stinner em bpo-35059.)

* As fun√ß√µes "PyByteArray_Init()" e "PyByteArray_Fini()" foram
  removidas. Elas n√£o faziam nada desde o Python 2.7.4 e o Python
  3.2.0, foram exclu√≠das da API limitada (ABI est√°vel) e n√£o foram
  documentados. (Contribui√ß√£o de Victor Stinner em bpo-35713.)

* O resultado de "PyExceptionClass_Name()" agora √© do tipo "const char
  *" em vez de "char *". (Contribui√ß√£o de Serhiy Storchaka em
  bpo-33818.)

* A dualidade de "Modules/Setup.dist" e "Modules/Setup" foi removida.
  Anteriormente, ao atualizar a √°rvore de fontes do CPython, era
  necess√°rio copiar manualmente "Modules/Setup.dist" (dentro da √°rvore
  de fontes) para "Modules/Setup" (dentro da √°rvore de compila√ß√£o), a
  fim de refletir todas as altera√ß√µes upstream. Isso foi um pequeno
  benef√≠cio para os empacotadores, √† custa de um aborrecimento
  frequente para os desenvolvedores ap√≥s o desenvolvimento do CPython,
  pois esquecer de copiar o arquivo pode causar falhas na compila√ß√£o.

  Agora, o sistema de compila√ß√£o sempre l√™ "Modules/Setup" dentro da
  √°rvore de fontes. As pessoas que desejam personalizar esse arquivo
  s√£o incentivadas a manter suas altera√ß√µes em um fork do git do
  CPython ou como arquivos de patch, como faria em qualquer outra
  altera√ß√£o na √°rvore de fontes.

  (Contribui√ß√£o de Antoine Pitrou em bpo-32430.)

* Fun√ß√µes que convertem um n√∫mero Python em n√∫mero inteiro C, como
  "PyLong_AsLong()", e fun√ß√µes de an√°lise de argumentos, como
  "PyArg_ParseTuple()", com unidades de formato de convers√£o de
  n√∫meros inteiros, como "'i'", agora usar√£o o m√©todo especial
  "__index__()" em vez de "__int__()", se dispon√≠vel. O aviso de
  descontinua√ß√£o ser√° emitido para objetos com o m√©todo "__int__()",
  mas sem o m√©todo "__index__()" (como "Decimal" e "Fraction" ).
  "PyNumber_Check()" agora retornar√° "1" para objetos implementando
  "__index__()". "PyNumber_Long()", "PyNumber_Float()" e
  "PyFloat_AsDouble()" agora tamb√©m usam o m√©todo "__index__()", se
  dispon√≠vel. (Contribui√ß√£o de Serhiy Storchaka em bpo-36048 e
  bpo-20092.)

* Objetos de tipo alocado a heap agora aumentar√£o sua contagem de
  refer√™ncias em "PyObject_Init()" (e sua macro paralela
  "PyObject_INIT") em vez de em "PyType_GenericAlloc()". Os tipos que
  modificam a aloca√ß√£o ou desaloca√ß√£o de inst√¢ncia podem precisar ser
  ajustados. (Contribui√ß√£o de Eddie Elizondo em bpo-35810.)

* The new function "PyCode_NewWithPosOnlyArgs()" allows to create code
  objects like "PyCode_New()", but with an extra *posonlyargcount*
  parameter for indicating the number of positional-only arguments.
  (Contributed by Pablo Galindo in bpo-37221.)

* "Py_SetPath()" agora define "sys.executable" para o caminho completo
  do programa ("Py_GetProgramFullPath()") em vez do nome do programa
  ("Py_GetProgramName()"). (Contribui√ß√£o de Victor Stinner em
  bpo-38234.)


Descontinuados
==============

* O comando distutils "bdist_wininst" agora est√° descontinuado; use
  "bdist_wheel" (pacotes wheel). (Contribui√ß√£o de Victor Stinner em
  bpo-37481.)

* Os m√©todos descontinuados "getchildren()" e "getiterator()" no
  m√≥dulo "ElementTree" agora emitem um "DeprecationWarning" em vez de
  "PendingDeprecationWarning". Eles ser√£o removidos no Python 3.9.
  (Contribui√ß√£o de Serhiy Storchaka em bpo-29209.)

* Passar um objeto que n√£o √© uma inst√¢ncia de
  "concurrent.futures.ThreadPoolExecutor" para
  "loop.set_default_executor()" foi descontinuado e ser√° proibido no
  Python 3.9. (Contribui√ß√£o de Elvis Pranskevichus em bpo-34075.)

* Os m√©todos "__getitem__()" de "xml.dom.pulldom.DOMEventStream",
  "wsgiref.util.FileWrapper" e "fileinput.FileInput" foram
  descontinuados.

  As implementa√ß√µes desses m√©todos t√™m ignorado seu par√¢metro *index*
  e retornado o pr√≥ximo item. (Contribui√ß√£o de Berker Peksag em
  bpo-9372.)

* A classe "typing.NamedTuple" descontinuou o atributo "_field_types"
  em favor do atributo "__annotations__" que possui as mesmas
  informa√ß√µes. (Contribui√ß√£o de Raymond Hettinger em bpo-36320.)

* As classes "Num", "Str", "Bytes", "NameConstant" e "Ellipsis" do
  m√≥dulo "ast" s√£o consideradas descontinuadas e ser√£o removidos em
  vers√µes futuras do Python. A "Constant" deve ser usado.
  (Contribui√ß√£o de Serhiy Storchaka em bpo-32892.)

* Os m√©todos "visit_Num()", "visit_Str()", "visit_Bytes()",
  "visit_NameConstant()" e "visit_Ellipsis()" da classe
  "ast.NodeVisitor" est√£o agora descontinuados e n√£o ser√£o chamados
  nas vers√µes futuras do Python. Adicione o m√©todo "visit_Constant()"
  para manipular todos os n√≥s constantes. (Contribui√ß√£o de Serhiy
  Storchaka em bpo-36917.)

* O *decorador* de "asyncio.coroutine()" foi descontinuado e ser√°
  removido na vers√£o 3.10. Em vez de "@asyncio.coroutine", use "async
  def". (Contribui√ß√£o de Andrew Svetlov em bpo-36921.)

* Em "asyncio", a passagem expl√≠cita de um argumento *loop* foi
  descontinuado e ser√° removido na vers√£o 3.10 para os seguintes:
  "asyncio.sleep()", "asyncio.gather()", "asyncio.shield()",
  "asyncio.wait_for()", "asyncio.wait()", "asyncio.as_completed()",
  "asyncio.Task", "asyncio.Lock", "asyncio.Event",
  "asyncio.Condition", "asyncio.Semaphore",
  "asyncio.BoundedSemaphore", "asyncio.Queue",
  "asyncio.create_subprocess_exec()" e
  "asyncio.create_subprocess_shell()".

* A passagem expl√≠cita dos objetos da corrotina para "asyncio.wait()"
  foi descontinuada e ser√° removida na vers√£o 3.11. (Contribui√ß√£o de
  Yury Selivanov em bpo-34790.)

* As seguintes fun√ß√µes e os seguintes m√©todos est√£o descontinuados no
  m√≥dulo "gettext": "lgettext()", "ldgettext()", "lngettext()" e
  "ldngettext()". Eles retornam bytes codificados e √© poss√≠vel que
  voc√™ obtenha exce√ß√µes relacionadas ao Unicode inesperadas se houver
  problemas de codifica√ß√£o com as strings traduzidas. √â muito melhor
  usar alternativas que retornam strings Unicode no Python 3. Essas
  fun√ß√µes estiveram quebradas por um longo tempo.

  A fun√ß√£o "bind_textdomain_codeset()", os m√©todos "output_charset()"
  e "set_output_charset()" e o par√¢metro *codeset* das fun√ß√µes
  "translation()" e "install()" tamb√©m est√£o descontinuados, pois s√£o
  usados apenas para as fun√ß√µes "l*gettext()". (Contribui√ß√£o de Serhiy
  Storchaka em bpo-33710.)

* O m√©todo "isAlive()" da classe "threading.Thread" foi descontinuado.
  (Contribui√ß√£o de Donghee Na em bpo-35283.)

* Muitas fun√ß√µes internas e de extens√£o que recebem argumentos
  inteiros agora emitem um aviso de descontinuidade para objetos de
  "Decimal", de "Fraction" e quaisquer outros objetos que possam ser
  convertidos apenas em n√∫meros inteiros com perda (por exemplo, que
  possuem o m√©todo "__int__()", mas n√£o t√™m o m√©todo "__index__()").
  Em uma vers√£o futura, haver√° erros. (Contribui√ß√£o de Serhiy
  Storchaka em bpo-36048.)

* Descontinuada a passagem dos seguintes argumentos como argumentos
  nomeados:

  * *func* em "functools.partialmethod()", "weakref.finalize()",
    "profile.Profile.runcall()", "cProfile.Profile.runcall()",
    "bdb.Bdb.runcall()", "trace.Trace.runfunc()" e "curses.wrapper()".

  * *function* em "unittest.TestCase.addCleanup()".

  * *fn* no m√©todo "submit()" de
    "concurrent.futures.ThreadPoolExecutor" e
    "concurrent.futures.ProcessPoolExecutor".

  * *callback* em "contextlib.ExitStack.callback()",
    "contextlib.AsyncExitStack.callback()" e
    "contextlib.AsyncExitStack.push_async_callback()".

  * *c* e *typeid* no m√©todo "create()" de
    "multiprocessing.managers.Server" e
    "multiprocessing.managers.SharedMemoryServer".

  * *obj* em "weakref.finalize()".

  Em vers√µes futuras do Python, elas ser√£o somente-posicionais.
  (Contribui√ß√£o de Serhiy Storchaka em bpo-36492.)


Remo√ß√£o de APIs e recursos
==========================

Os seguintes recursos e APIs foram removidos do Python 3.8:

* A partir do Python 3.3, a importa√ß√£o de ABCs de "collections" foi
  descontinuada e a importa√ß√£o deve ser feita de "collections.abc". A
  possibilidade de importar de cole√ß√µes foi marcada para remo√ß√£o em
  3.8, mas foi adiada para 3.9. (Veja bpo-36952.)

* O m√≥dulo "macpath", descontinuado no Python 3.7, foi removido.
  (Contribui√ß√£o de Victor Stinner em bpo-35471.)

* A fun√ß√£o "platform.popen()" foi removida, ap√≥s ter sido
  descontinuada desde o Python 3.3: use "os.popen()". (Contribui√ß√£o de
  Victor Stinner em bpo-35345.)

* A fun√ß√£o "time.clock()" foi removida, ap√≥s ter sido descontinuada
  desde o Python 3.3: use "time.perf_counter()" ou
  "time.process_time()", dependendo de seus requisitos, para ter o
  comportamento j√° definido. (Contribui√ß√£o de Matthias Bussonnier em
  bpo-36895.)

* O script "pyvenv" foi removido em favor do "python3.8 -m venv" para
  ajudar a eliminar a confus√£o sobre a qual interpretador Python o
  script "pyvenv" est√° associado. (Contribui√ß√£o de Brett Cannon em
  bpo-25427.)

* "parse_qs", "parse_qsl" e "escape" foram removidos do m√≥dulo "cgi".
  Eles foram descontinuados no Python 3.2 ou mais antigo. Eles devem
  ser importados dos m√≥dulos "urllib.parse" e "html".

* A fun√ß√£o "filemode" foi removida do m√≥dulo "tarfile". N√£o √©
  documentada e foi descontinuada desde o Python 3.3.

* O construtor "XMLParser" n√£o aceita mais o argumento *html*. Isso
  nunca teve efeito e foi descontinuado no Python 3.4. Todos os outros
  par√¢metros agora s√£o somente-nomeados. (Contribui√ß√£o de Serhiy
  Storchaka em bpo-29209.)

* Removido o m√©todo "doctype()" de "XMLParser". (Contribui√ß√£o de
  Serhiy Storchaka em bpo-29209.)

* O codec "unicode_internal" foi removido. (Contribui√ß√£o de Inada
  Naoki em bpo-36297.)

* Os objetos "Cache" e "Statement" do m√≥dulo "sqlite3" n√£o expostos
  para o usu√°rio. (Contribui√ß√£o de Aviv Palivoda em bpo-30262.)

* O argumento nomeado "bufsize" de "fileinput.input()" e
  "fileinput.FileInput()", que era ignorado e estava descontinuado
  desde o Python 3.6, foi removido. bpo-36952 (Contribui√ß√£o de
  Matthias Bussonnier.)

* As fun√ß√µes descontinuadas "sys.set_coroutine_wrapper()" e
  "sys.get_coroutine_wrapper()" no Python 3.7 foram removidas;
  bpo-36933 (Contribui√ß√£o de Matthias Bussonnier.)


Portando para o Python 3.8
==========================

Esta se√ß√£o lista as altera√ß√µes descritas anteriormente e outras
corre√ß√µes que podem exigir altera√ß√µes no seu c√≥digo.


Altera√ß√µes no comportamento do Python
-------------------------------------

* Express√µes *yield* (ambas as cl√°usulas "yield" e "yield from") agora
  n√£o s√£o permitidas nas compreens√µes e express√µes geradoras (al√©m da
  express√£o iter√°vel na cl√°usula mais √† esquerda "for"). (Contribui√ß√£o
  de Serhiy Storchaka em bpo-10544.)

* Agora, o compilador produz um "SyntaxWarning" quando verifica√ß√µes de
  identidade ("is" e "is not") s√£o usadas com certos tipos de literais
  (por exemplo, strings, n√∫meros). Geralmente, eles podem funcionar
  acidentalmente no CPython, mas n√£o s√£o garantidos pelas
  especifica√ß√µes da linguagem. O aviso aconselha os usu√°rios a usar
  testes de igualdade ("==" e "!="). (Contribui√ß√£o de Serhiy Storchaka
  em bpo-34850.)

* O interpretador do CPython pode engolir exce√ß√µes em algumas
  circunst√¢ncias. No Python 3.8, isso acontece em menos casos. Em
  particular, as exce√ß√µes levantadas ao obter o atributo do dicion√°rio
  de tipos n√£o s√£o mais ignoradas. (Contribui√ß√£o de Serhiy Storchaka
  em bpo-35459.)

* Removidas as implementa√ß√µes "__str__" dos tipos embutidos "bool",
  "int", "float", "complex" e poucas classes da biblioteca padr√£o.
  Agora eles herdam "__str__()" de "object". Como resultado, definir o
  m√©todo "__repr__()" na subclasse dessas classes afetar√° sua
  representa√ß√£o de string. (Contribui√ß√£o de Serhiy Storchaka em
  bpo-36793.)

* No AIX, "sys.platform" n√£o cont√©m mais a vers√£o principal. √â sempre
  "'aix'", em vez de "'aix3'" .. "'aix7'". Como as vers√µes mais
  antigas do Python incluem o n√∫mero da vers√£o, √© recomend√°vel usar
  sempre "sys.platform.startswith('aix')". (Contribui√ß√£o de M. Felt em
  bpo-36588.)

* "PyEval_AcquireLock()" e "PyEval_AcquireThread()" agora encerram a
  thread atual se chamado enquanto o interpretador est√° finalizando,
  tornando-os consistentes com "PyEval_RestoreThread()",
  "Py_END_ALLOW_THREADS()" e "PyGILState_Ensure()". Se esse
  comportamento n√£o for desejado, proteja a chamada verificando
  "_Py_IsFinalizing()" ou "sys.is_finalizing()". (Contribui√ß√£o de
  Joannah Nanjekye em bpo-36475.)


Altera√ß√µes na API Python
------------------------

* A fun√ß√£o "os.getcwdb()" agora usa a codifica√ß√£o UTF-8 no Windows, em
  vez da p√°gina de c√≥digos ANSI: veja **PEP 529** para a
  justificativa. A fun√ß√£o n√£o √© mais descontinuada no Windows.
  (Contribui√ß√£o de Victor Stinner em bpo-37412.)

* "subprocess.Popen" agora pode usar "os.posix_spawn()" em alguns
  casos, para obter melhor desempenho. No Windows Subsystem para Linux
  e emula√ß√£o de usu√°rio QEMU, o construtor "Popen" usando
  "os.posix_spawn()" n√£o levanta mais uma exce√ß√£o em erros como
  "missing program". Em vez disso, o processo filho falha com um
  diferente de zero "returncode". (Contribui√ß√£o de Joannah Nanjekye e
  Victor Stinner em bpo-35537.)

* O argumento *preexec_fn* de * "subprocess.Popen" n√£o √© mais
  compat√≠vel com subinterpretadores. O uso do par√¢metro em um
  subinterpretador agora levanta "RuntimeError". (Contribui√ß√£o de Eric
  Snow em bpo-34651, modificado por Christian Heimes em bpo-37951.)

* O m√©todo "imap.IMAP4.logout()" n√£o mais ignora silenciosamente
  exce√ß√µes arbitr√°rias. (Contribui√ß√£o de Victor Stinner em bpo-36348.)

* A fun√ß√£o "platform.popen()" foi removida, ap√≥s ter sido
  descontinuada desde o Python 3.3: use "os.popen()". (Contribui√ß√£o de
  Victor Stinner em bpo-35345.)

* A fun√ß√£o "Statistics.mode()" n√£o levanta mais uma exce√ß√£o quando
  dados multimodais s√£o fornecidos. Em vez disso, ela retorna o
  primeiro modo encontrado nos dados de entrada. (Contribui√ß√£o de
  Raymond Hettinger em bpo-35892.)

* O m√©todo "selection()" da classe "tkinter.ttk.Treeview" n√£o recebe
  mais argumentos. Seu uso com argumentos para alterar a sele√ß√£o foi
  descontinuado no Python 3.6. Use m√©todos especializados como
  "selection_set()" para alterar a sele√ß√£o. (Contribui√ß√£o de Serhiy
  Storchaka em bpo-31508.)

* Os m√©todos "writexml()", "toxml()" e "toprettyxml()" de
  "xml.dom.minidom", e o m√©todo "write()" de "xml.etree", agora
  preservam a ordem dos atributos especificados pelo usu√°rio.
  (Contribui√ß√£o de Diego Rojas e Raymond Hettinger em bpo-34160.)

* Um banco de dados "dbm.dumb" aberto com sinalizadores "'r'" agora √©
  somente leitura. "dbm.dumb.open()" com os sinalizadores "'r'" e
  "'w'" n√£o cria mais um banco de dados se ele n√£o existir.
  (Contribui√ß√£o de Serhiy Storchaka em bpo-32749.)

* O m√©todo "doctype()" definido em uma subclasse de "XMLParser" n√£o
  ser√° mais chamado e emitir√° um "RuntimeWarning" em vez de um
  "DeprecationWarning". Defina o m√©todo "doctype()" em um alvo para
  manipular uma declara√ß√£o doctype XML. (Contribui√ß√£o de Serhiy
  Storchaka em bpo-29209.)

* Uma "RuntimeError" agora √© levantada quando a metaclasse
  personalizada n√£o fornece a entrada "__classcell__" no espa√ßo de
  nomes passado para "type.__new__". Uma "DeprecationWarning" era
  emitida no Python 3.6-3.7. (Contribui√ß√£o de Serhiy Storchaka em
  bpo-23722.)

* A classe "cProfile.Profile" agora pode ser usada como um gerenciador
  de contexto. (Contribui√ß√£o de Scott Sanderson em bpo-29235.)

* "shutil.copyfile()", "shutil.copy()", "shutil.copy2()",
  "shutil.copytree()" e "shutil.copytree()" usam chamadas de sistema
  de "c√≥pia r√°pido" espec√≠fica da plataforma (veja a se√ß√£o Opera√ß√µes
  de c√≥pia eficientes dependentes da plataforma).

* O tamanho padr√£o do buffer de "shutil.copyfile()" no Windows foi
  alterado de 16 KiB para 1 MiB.

* A estrutura de "PyGC_Head" mudou completamente. Todo o c√≥digo que
  tocava no membro struct deve ser reescrito. (Veja bpo-33597.)

* A estrutura de "PyInterpreterState" foi movida para os arquivos de
  cabe√ßalho "internal" (especificamente
  Include/internal/pycore_pystate.h). Um "PyInterpreterState" opaco
  ainda est√° dispon√≠vel como parte da API p√∫blica (e ABI est√°vel). Os
  documentos indicam que nenhum dos campos da estrutura √© p√∫blico, por
  isso esperamos que ningu√©m os tenha usado. No entanto, se voc√™
  confia em um ou mais desses campos em particular e n√£o tiver
  alternativa, abra um relat√≥rio de erro no BPO. Vamos trabalhar para
  ajud√°-lo a ajustar (possivelmente incluindo a adi√ß√£o de fun√ß√µes de
  acessador √† API p√∫blica). (Veja bpo-35886.)

* O m√©todo "mmap.flush()" agora retorna "None" com √™xito e levanta uma
  exce√ß√£o no erro em todas as plataformas. Anteriormente, seu
  comportamento dependia da plataforma: um valor diferente de zero era
  retornado com √™xito; zero era retornado com erro no Windows. Um
  valor zero era retornado com sucesso; uma exce√ß√£o era levanta no
  caso de erro no Unix. (Contribui√ß√£o de Berker Peksag em bpo-2122.)

* Os m√≥dulos "xml.dom.minidom" e "xml.sax" n√£o mais processam
  entidades externas por padr√£o. (Contribui√ß√£o de Christian Heimes em
  bpo-17239.)

* A exclus√£o de uma chave de um banco de dados somente leitura "dbm"
  ("dbm.dumb", "dbm.gnu" ou "dbm.ndbm") levanta "error"
  ("dbm.dumb.error", "dbm.gnu.error" ou "dbm.ndbm.error") em vez de
  "KeyError". (Contribui√ß√£o de Xiang Zhang em bpo-33106.)

* AST foi simplificado para literais. Todas as constantes ser√£o
  representadas como inst√¢ncias de "ast.Constant". Instanciar classes
  antigas "Num", "Str", "Bytes", "NameConstant" e "Ellipsis" retornar√°
  uma inst√¢ncia de "Constant". (Contribui√ß√£o de Serhiy Storchaka em
  bpo-32892.)

* "expanduser()" no Windows agora prefere a vari√°vel de ambiente
  "USERPROFILE" e n√£o usa "HOME", que normalmente n√£o √© definido para
  contas de usu√°rio comuns. (Contribui√ß√£o de Anthony Sottile em
  bpo-36264.)

* A exce√ß√£o "asyncio.CancelledError" agora herda de "BaseException" em
  vez de "Exception" e n√£o mais herda de
  "concurrent.futures.CancelledError". (Contribui√ß√£o de Yury Selivanov
  em bpo-32528.)

* A fun√ß√£o "asyncio.wait_for()" agora aguarda corretamente o
  cancelamento ao usar uma inst√¢ncia de "asyncio.Task". Anteriormente,
  ao atingir tempo limite, ele era cancelado e devolvido
  imediatamente. (Contribui√ß√£o de Elvis Pranskevichus em bpo-32751.)

* A fun√ß√£o "asyncio.BaseTransport.get_extra_info()" agora retorna um
  objeto soquete seguro de usar quando 'socket' √© passado para o
  par√¢metro *name*. (Contribui√ß√£o de Yury Selivanov em bpo-37027.)

* "asyncio.BufferedProtocol" foi promovida a API est√°vel.

* As depend√™ncias de DLL para m√≥dulos de extens√£o e DLLs carregadas
  com "ctypes" no Windows agora s√£o resolvidas com mais seguran√ßa.
  Somente os caminhos do sistema, o diret√≥rio que cont√©m o arquivo DLL
  ou PYD e os diret√≥rios adicionados com "add_dll_directory()" s√£o
  pesquisados por depend√™ncias de tempo de carregamento.
  Especificamente, "PATH" e o diret√≥rio de trabalho atual n√£o s√£o mais
  usados, e as modifica√ß√µes nelas n√£o ter√£o mais efeito na resolu√ß√£o
  normal da DLL. Se seu aplicativo conta com esses mecanismos, voc√™
  deve verificar "add_dll_directory()" e, se existir, use-o para
  adicionar seu diret√≥rio DLLs ao carregar sua biblioteca. Observe que
  os usu√°rios do Windows 7 precisar√£o garantir que o Windows Update
  KB2533623 esteja instalado (isso tamb√©m √© verificado pelo
  instalador). (Contribui√ß√£o de Steve Dower em bpo-36085.)

* Os arquivos de cabe√ßalho e as fun√ß√µes relacionadas ao pgen foram
  removidos ap√≥s sua substitui√ß√£o por uma implementa√ß√£o pura do
  Python. (Contribui√ß√£o de Pablo Galindo em bpo-36623.)

* "types.CodeType" possui um novo par√¢metro na segunda posi√ß√£o do
  construtor (*posonlyargcount *) para suportar argumentos apenas de
  posi√ß√£o definidos em :pep:`570`. O primeiro argumento (*argcount*)
  agora representa o n√∫mero total de argumentos posicionais (incluindo
  argumentos somente posicionais). O novo m√©todo "replace()" de
  "types.CodeType" pode ser usado para tornar o c√≥digo √† prova de
  futuro.

* O par√¢metro "digestmod" para "hmac.new()" n√£o usa mais o resumo MD5
  por padr√£o.


Altera√ß√µes na API C
-------------------

* A estrutura "PyCompilerFlags" recebeu um novo campo
  *cf_feature_version*. Ele deve ser inicializado para
  "PY_MINOR_VERSION". O campo √© ignorado por padr√£o e √© usado se e
  somente se o sinalizador "PyCF_ONLY_AST" estiver definido em
  *cf_flags*. (Contribui√ß√£o de Guido van Rossum em bpo-35766.)

* A fun√ß√£o "PyEval_ReInitThreads()" foi removida da API C. N√£o deve
  ser chamada explicitamente: use "PyOS_AfterFork_Child()".
  (Contribui√ß√£o de Victor Stinner em bpo-36728.)

* No Unix, as extens√µes C n√£o est√£o mais vinculadas ao libpython,
  exceto no Android e Cygwin. Quando o Python √© incorporado,
  "libpython" n√£o deve ser carregado com "RTLD_LOCAL", mas
  "RTLD_GLOBAL". Anteriormente, usando "RTLD_LOCAL", j√° n√£o era
  poss√≠vel carregar extens√µes C que n√£o estavam vinculadas a
  "libpython", como extens√µes C da biblioteca padr√£o criada pela se√ß√£o
  "*shared*" de "Modules/Setup". (Contribui√ß√£o de Victor Stinner em
  bpo-21536.)

* O uso de variantes "#" de formatos na an√°lise ou constru√ß√£o de valor
  (por exemplo, "PyArg_ParseTuple()", "Py_BuildValue()",
  "PyObject_CallFunction()", etc.) sem "PY_SSIZE_T_CLEAN" definido
  agora levanta "DeprecationWarning". Ser√° removido em 3.10 ou 4.0.
  Leia An√°lise de argumentos e constru√ß√£o de valores para detalhes.
  (Contribui√ß√£o de Inada Naoki em bpo-36381.)

* Inst√¢ncias de tipos alocados por heap (como aqueles criados com
  "PyType_FromSpec()") mant√™m uma refer√™ncia ao seu objeto de tipo. O
  aumento da contagem de refer√™ncias desses objetos de tipo foi movido
  de "PyType_GenericAlloc()" para as fun√ß√µes de n√≠vel mais baixo,
  "PyObject_Init()" e "PyObject_INIT()". Isso faz com que os tipos
  criados atrav√©s de "PyType_FromSpec()" se comportem como outras
  classes no c√≥digo gerenciado.

  Tipos alocados estaticamente n√£o s√£o afetados.

  Para a grande maioria dos casos, n√£o deve haver efeito colateral. No
  entanto, tipos que aumentam manualmente a contagem de refer√™ncia
  ap√≥s alocar uma inst√¢ncia (talvez para solucionar o bug) agora podem
  se tornar imortais. Para evitar isso, essas classes precisam chamar
  Py_DECREF no objeto de tipo durante a desaloca√ß√£o da inst√¢ncia.

  Para portar corretamente esses tipos para o 3.8, aplique as
  seguintes altera√ß√µes:

  * Remove "Py_INCREF" no objeto de tipo depois de alocar uma
    inst√¢ncia -- se houver. Isso pode acontecer ap√≥s a chamada de
    "PyObject_New", "PyObject_NewVar", "PyObject_GC_New()",
    "PyObject_GC_NewVar()" ou qualquer outro alocador personalizado
    que use "PyObject_Init()" ou "PyObject_INIT()".

    Exemplo:

       static foo_struct *
       foo_new(PyObject *type) {
           foo_struct *foo = PyObject_GC_New(foo_struct, (PyTypeObject *) type);
           if (foo == NULL)
               return NULL;
       #if PY_VERSION_HEX < 0x03080000
           // Workaround for Python issue 35810; no longer necessary in Python 3.8
           PY_INCREF(type)
       #endif
           return foo;
       }

  * Certifica-se de que todas as fun√ß√µes "tp_dealloc" personalizadas
    de tipos alocados em heap diminuam a contagem de refer√™ncias do
    tipo.

    Exemplo:

       static void
       foo_dealloc(foo_struct *instance) {
           PyObject *type = Py_TYPE(instance);
           PyObject_GC_Del(instance);
       #if PY_VERSION_HEX >= 0x03080000
           // This was not needed before Python 3.8 (Python issue 35810)
           Py_DECREF(type);
       #endif
       }

  (Contribui√ß√£o de Eddie Elizondo em bpo-35810.)

* A macro "Py_DEPRECATED()" foi implementada para MSVC. A macro agora
  deve ser colocada antes do nome do s√≠mbolo.

  Exemplo:

     Py_DEPRECATED(3.8) PyAPI_FUNC(int) Py_OldFunction(void);

  (Contribui√ß√£o de Zackery Spytz em bpo-33407.)

* O interpretador n√£o pretende mais dar suporte √† compatibilidade
  bin√°ria de tipos de extens√£o nas libera√ß√µes de recursos. O
  "PyTypeObject" exportado por um m√≥dulo de extens√£o de terceiros deve
  ter todos os slots esperados na vers√£o atual do Python, incluindo
  "tp_finalize" ("Py_TPFLAGS_HAVE_FINALIZE" n√£o √© mais verificado
  antes de ler "tp_finalize").

  (Contribui√ß√£o de Antoine Pitrou em bpo-32388.)

* As fun√ß√µes "PyNode_AddChild()" e "PyParser_AddToken()" agora aceitam
  dois argumentos adicionais "int" *end_lineno* e *end_col_offset*.

* O arquivo "libpython38.a" para permitir que as ferramentas do MinGW
  se vinculem diretamente a "python38.dll" n√£o est√° mais inclu√≠do na
  distribui√ß√£o regular do Windows. Se voc√™ precisar deste arquivo, ele
  poder√° ser gerado com as ferramentas "gendef" e "dlltool", que fazem
  parte do pacote binutils do MinGW:

     gendef - python38.dll > tmp.def
     dlltool --dllname python38.dll --def tmp.def --output-lib libpython38.a

  A localiza√ß√£o de um arquivo "pythonXY.dll" depender√° das op√ß√µes de
  instala√ß√£o e da vers√£o e idioma do Windows. Consulte Utilizando
  Python no Windows para mais informa√ß√µes. A biblioteca resultante
  deve ser colocada no mesmo diret√≥rio que "pythonXY.lib", que
  geralmente √© o diret√≥rio "libs" na sua instala√ß√£o do Python.

  (Contribui√ß√£o de Steve Dower em bpo-37351.)


Altera√ß√µes de bytecode do CPython
---------------------------------

* O loop do interpretador foi simplificado movendo a l√≥gica de
  desenrolar a pilha de blocos no compilador. O compilador agora emite
  instru√ß√µes expl√≠citas para ajustar a pilha de valores e chamar o
  c√≥digo de limpeza para "break", "continue" e "return".

  Removidos os c√≥digos de opera√ß√£o "BREAK_LOOP", "CONTINUE_LOOP",
  "SETUP_LOOP" e "SETUP_EXCEPT". Adicionados novos c√≥digos de opera√ß√£o
  "ROT_FOUR", "BEGIN_FINALLY", "CALL_FINALLY" e "POP_FINALLY".
  Alterado o comportamento de "END_FINALLY" e "WITH_CLEANUP_START".

  (Contribui√ß√£o de Mark Shannon, Antoine Pitrou e Serhiy Storchaka em
  bpo-17611.)

* Adicionado novo c√≥digo de opera√ß√£o "END_ASYNC_FOR" para lidar com
  exce√ß√µes geradas ao aguardar um pr√≥ximo item em um loop "async for".
  (Contribui√ß√£o de Serhiy Storchaka em bpo-33041.)

* O "MAP_ADD" agora espera o valor como o primeiro elemento na pilha e
  a chave como o segundo elemento. Essa altera√ß√£o foi feita para que a
  chave seja sempre avaliada antes do valor na compreens√£o do
  dicion√°rio, conforme proposto em **PEP 572**. (Contribui√ß√£o de J√∂rn
  Heissler em bpo-35224.)


Ferramentas e daemons
---------------------

Adicionado um script de benchmark para cronometrar v√°rias maneiras de
acessar vari√°veis: "Tools/scripts/var_access_benchmark.py".
(Contribui√ß√£o de Raymond Hettinger em bpo-35884.)

Aqui est√° um resumo das melhorias de desempenho desde Python 3.3:

   Python version                       3.3     3.4     3.5     3.6     3.7     3.8
   --------------                       ---     ---     ---     ---     ---     ---

   Variable and attribute read access:
       read_local                       4.0     7.1     7.1     5.4     5.1     3.9
       read_nonlocal                    5.3     7.1     8.1     5.8     5.4     4.4
       read_global                     13.3    15.5    19.0    14.3    13.6     7.6
       read_builtin                    20.0    21.1    21.6    18.5    19.0     7.5
       read_classvar_from_class        20.5    25.6    26.5    20.7    19.5    18.4
       read_classvar_from_instance     18.5    22.8    23.5    18.8    17.1    16.4
       read_instancevar                26.8    32.4    33.1    28.0    26.3    25.4
       read_instancevar_slots          23.7    27.8    31.3    20.8    20.8    20.2
       read_namedtuple                 68.5    73.8    57.5    45.0    46.8    18.4
       read_boundmethod                29.8    37.6    37.9    29.6    26.9    27.7

   Variable and attribute write access:
       write_local                      4.6     8.7     9.3     5.5     5.3     4.3
       write_nonlocal                   7.3    10.5    11.1     5.6     5.5     4.7
       write_global                    15.9    19.7    21.2    18.0    18.0    15.8
       write_classvar                  81.9    92.9    96.0   104.6   102.1    39.2
       write_instancevar               36.4    44.6    45.8    40.0    38.9    35.5
       write_instancevar_slots         28.7    35.6    36.1    27.3    26.6    25.7

   Data structure read access:
       read_list                       19.2    24.2    24.5    20.8    20.8    19.0
       read_deque                      19.9    24.7    25.5    20.2    20.6    19.8
       read_dict                       19.7    24.3    25.7    22.3    23.0    21.0
       read_strdict                    17.9    22.6    24.3    19.5    21.2    18.9

   Data structure write access:
       write_list                      21.2    27.1    28.5    22.5    21.6    20.0
       write_deque                     23.8    28.7    30.1    22.7    21.8    23.5
       write_dict                      25.9    31.4    33.3    29.3    29.2    24.7
       write_strdict                   22.9    28.4    29.9    27.5    25.2    23.1

   Stack (or queue) operations:
       list_append_pop                144.2    93.4   112.7    75.4    74.2    50.8
       deque_append_pop                30.4    43.5    57.0    49.4    49.2    42.5
       deque_append_popleft            30.8    43.7    57.3    49.7    49.7    42.8

   Timing loop:
       loop_overhead                    0.3     0.5     0.6     0.4     0.3     0.3

Os benchmarks foram medidos em um processador Intel¬Æ Core‚Ñ¢ i7-4960HQ
nos sistemas macOS 64-bit encontrados em python.org. O script de
benchmark exibe tempos em nanossegundos.


Altera√ß√µes not√°veis no Python 3.8.1
===================================

Devido a significativas preocupa√ß√µes de seguran√ßa, o par√¢metro
*reuse_address* de "asyncio.loop.create_datagram_endpoint()" n√£o √©
mais suportado. Isso ocorre devido ao comportamento da op√ß√£o de
soquete "SO_REUSEADDR" no UDP. Para mais detalhes, consulte a
documenta√ß√£o de "loop.create_datagram_endpoint()". (Contribui√ß√£o de
Kyle Stanley, Antoine Pitrou e Yury Selivanov em bpo-37228.)


Altera√ß√µes not√°veis no Python 3.8.2
===================================

Fixed a regression with the "ignore" callback of "shutil.copytree()".
The argument types are now str and List[str] again. (Contributed by
Manuel Barkhau and Giampaolo Rodola in gh-83571.)


Altera√ß√µes not√°veis no Python 3.8.3
===================================

The constant values of future flags in the "__future__" module are
updated in order to prevent collision with compiler flags. Previously
"PyCF_ALLOW_TOP_LEVEL_AWAIT" was clashing with "CO_FUTURE_DIVISION".
(Contributed by Batuhan Taskaya in gh-83743)


Altera√ß√µes not√°veis no Python 3.8.8
===================================

Vers√µes anteriores do Python permitiam o uso de ";" e "&" como
separadores de par√¢metros de consulta nas fun√ß√µes
"urllib.parse.parse_qs()" e "urllib.parse.parse_qsl()". Devido a
quest√µes de seguran√ßa, e em conformidade com as recomenda√ß√µes mais
recentes do W3C, isso foi alterado para permitir apenas uma √∫nica
chave separadora, com "&" como padr√£o. Esta mudan√ßa tamb√©m afeta as
fun√ß√µes "cgi.parse()" e "cgi.parse_multipart()" j√° que elas usam as
fun√ß√µes afetadas internamente. Para obter mais detalhes, consulte sua
respectiva documenta√ß√£o. (Contribui√ß√£o de Adam Goldschmidt, Senthil
Kumaran e Ken Jin em bpo-42967.)


Notable changes in Python 3.8.9
===============================

A security fix alters the "ftplib.FTP" behavior to not trust the IPv4
address sent from the remote server when setting up a passive data
channel.  We reuse the ftp server IP address instead.  For unusual
code requiring the old behavior, set a
"trust_server_pasv_ipv4_address" attribute on your FTP instance to
"True".  (See gh-87451)


Notable changes in Python 3.8.10
================================


Suporte a macOS 11.0 (Big Sur) e Apple Silicon Mac
--------------------------------------------------

As of 3.8.10, Python now supports building and running on macOS 11
(Big Sur) and on Apple Silicon Macs (based on the "ARM64"
architecture). A new universal build variant, "universal2", is now
available to natively support both "ARM64" and "Intel 64" in one set
of executables. Note that support for "weaklinking", building binaries
targeted for newer versions of macOS that will also run correctly on
older versions by testing at runtime for missing features, is not
included in this backport from Python 3.9; to support a range of macOS
versions, continue to target for and build on the oldest version in
the range.

(Originally contributed by Ronald Oussoren and Lawrence D'Anna in
gh-85272, with fixes by FX Coudert and Eli Rykoff, and backported to
3.8 by Maxime B√©langer and Ned Deily)


Notable changes in Python 3.8.10
================================


urllib.parse
------------

A presen√ßa de caracteres de nova linha ou tab em partes de um URL
permite algumas formas de ataques. Seguindo a especifica√ß√£o WHATWG que
atualiza **RFC 3986**, nova linha ASCII "\n", "\r" e os caracteres de
tabula√ß√£o "\t" s√£o retirados da URL pelo analisador sint√°tico em
"urllib.parse" impedindo tais ataques. Os caracteres de remo√ß√£o s√£o
controlados por uma nova vari√°vel de n√≠vel de m√≥dulo
"urllib.parse._UNSAFE_URL_BYTES_TO_REMOVE". (Veja bpo-43882)


Altera√ß√µes not√°veis no Python 3.8.12
====================================


Altera√ß√µes na API Python
------------------------

A partir do Python 3.8.12, o m√≥dulo "ipaddress" n√£o aceita mais zeros
√† esquerda em strings de endere√ßo IPv4. Os zeros √† esquerda s√£o
amb√≠guos e interpretados como nota√ß√£o octal por algumas bibliotecas.
Por exemplo, a fun√ß√£o legada "socket.inet_aton()" trata os zeros √†
esquerda como nota√ß√£o octal. A implementa√ß√£o glibc de "inet_pton()"
moderna n√£o aceita nenhum zeros √† esquerda.

(Originalmente contribui√ß√£o de Christian Heimes em bpo-36384 e
backport para 3.8 por Achraf Merzouki.)


Notable security feature in 3.8.14
==================================

Converter entre "int" e "str" em bases diferentes de 2 (bin√°rio), 4, 8
(octal), 16 (hexadecimal) ou 32 como base 10 (decimal) agora levanta
uma exce√ß√£o "ValueError" se o n√∫mero de d√≠gitos em forma de string
estiver acima de um limite para evitar poss√≠veis ataques de nega√ß√£o de
servi√ßo devido √† complexidade algor√≠tmica. Esta √© uma mitiga√ß√£o para
CVE-2020-10735. Este limite pode ser configurado ou desabilitado por
vari√°vel de ambiente, sinalizador de linha de comando ou APIs de
"sys". Veja a documenta√ß√£o de limita√ß√£o de comprimento de convers√£o de
string inteira. O limite padr√£o √© de 4300 d√≠gitos em forma de string.


Notable changes in 3.8.17
=========================


tarfile
-------

* Os m√©todos de extra√ß√£o em "tarfile" e "shutil.unpack_archive()", t√™m
  um novo argumento *filter* que permite limitar recursos do tar que
  podem ser surpreendentes ou perigosos, como criar arquivos fora do
  diret√≥rio de destino. Veja Extraction filters para detalhes. No
  Python 3.12, usar sem o argumento *filter* mostrar√° um
  "DeprecationWarning". No Python 3.14, o padr√£o mudar√° para "'data'".
  (Contribui√ß√£o de Petr Viktorin em **PEP 706**.)
